ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"bsp_tim.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "../User/BSP/bsp_tim.c"
  20              		.section	.RamFunc,"ax",%progbits
  21              		.align	1
  22              		.global	switch_pwm
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	switch_pwm:
  28              	.LFB131:
   1:../User/BSP/bsp_tim.c **** #include "bsp_tim.h"
   2:../User/BSP/bsp_tim.c **** #define ADC_CLOCK (30000000)
   3:../User/BSP/bsp_tim.c **** #define PWM_FREQUENCY1 (6000)
   4:../User/BSP/bsp_tim.c **** #define TIMER_CLOCK_PRESCALER_SET 3 // 4·ÖÆµ
   5:../User/BSP/bsp_tim.c **** 
   6:../User/BSP/bsp_tim.c **** uint8_t pwm_polarity;
   7:../User/BSP/bsp_tim.c **** uint16_t GPTIMClockFrequency = 0;
   8:../User/BSP/bsp_tim.c **** int32_t TIM_Freq_buff[3] = {0};
   9:../User/BSP/bsp_tim.c **** 
  10:../User/BSP/bsp_tim.c **** /*************************************************************
  11:../User/BSP/bsp_tim.c ****  * ¶¨Ê±Æ÷1Êä³öPWMÅäÖÃ
  12:../User/BSP/bsp_tim.c ****  *************************************************************/
  13:../User/BSP/bsp_tim.c **** void TIM1_PWM_Init(uint8_t polarity)
  14:../User/BSP/bsp_tim.c **** {
  15:../User/BSP/bsp_tim.c ****   TIM_TimeBaseInitType TIM1_TimeBaseStructure;
  16:../User/BSP/bsp_tim.c ****   OCInitType TIM1_OCInitStructure;
  17:../User/BSP/bsp_tim.c ****   TIM_BDTRInitType TIM1_BDTRInitStructure;
  18:../User/BSP/bsp_tim.c ****   NVIC_InitType NVIC_InitStructure;
  19:../User/BSP/bsp_tim.c **** 
  20:../User/BSP/bsp_tim.c ****   uint16_t TimerPeriod = 0;
  21:../User/BSP/bsp_tim.c **** 
  22:../User/BSP/bsp_tim.c ****   TimerPeriod = (SystemClockFrequency / (PWM_FREQUENCY1 * 2) / (TIMER_CLOCK_PRESCALER_SET + 1));
  23:../User/BSP/bsp_tim.c **** 
  24:../User/BSP/bsp_tim.c ****   // Time Base configuration  ¶¨Ê±Æ÷1Ê±ÖÓÔ´Îª60M
  25:../User/BSP/bsp_tim.c ****   TIM_Reset(TIM1);
  26:../User/BSP/bsp_tim.c ****   TIM_Base_Struct_Initialize(&TIM1_TimeBaseStructure);
  27:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Prescaler = TIMER_CLOCK_PRESCALER_SET;
  28:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.CntMode = TIM_CNT_MODE_CENTER_ALIGN1; // 01: \,irq flag only counter down
  29:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Period = TimerPeriod;
  30:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.ClkDiv = TIM_CLK_DIV4; // 4·ÖÆµ
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 2


  31:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.RepetCnt = 0;
  32:../User/BSP/bsp_tim.c **** 
  33:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM1, &TIM1_TimeBaseStructure);
  34:../User/BSP/bsp_tim.c **** 
  35:../User/BSP/bsp_tim.c ****   TIM_Reset(TIM2);
  36:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Prescaler = 0;
  37:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.CntMode = TIM_CNT_MODE_UP;
  38:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Period = TimerPeriod * 2 - 1; // TIM1¡¢TIM2¶¼ÊÇ¹¤×÷ÔÚ30Mhz,¼ÆÊýÖµÎª*2-1
  39:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM2, &TIM1_TimeBaseStructure);  // ÅäÖÃ¶¨Ê±Æ÷2
  40:../User/BSP/bsp_tim.c **** 
  41:../User/BSP/bsp_tim.c ****   // Channel 1, 2,3 in PWM mode
  42:../User/BSP/bsp_tim.c ****   // TIM_InitOcStruct(&TIM1_OCInitStructure);
  43:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcMode = TIM_OCMODE_PWM2; // Pos logic(when '<' is active,when '>' is inacti
  44:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OutputState = TIM_OUTPUT_STATE_DISABLE;
  45:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OutputNState = TIM_OUTPUT_NSTATE_DISABLE;
  46:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.Pulse = (TimerPeriod >> 1); // ÅäÖÃÎªÖÐÑë·Ç¶Ô³ÆÄ£Ê½£¬8Î»ÎªÏòÏÂ¼ÆÊýÖµ£¬µ±Ç°Îª
  47:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcPolarity = TIM_OC_POLARITY_HIGH;
  48:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcNPolarity = TIM_OCN_POLARITY_HIGH;
  49:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcIdleState = TIM_OC_IDLE_STATE_RESET;
  50:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcNIdleState = TIM_OC_IDLE_STATE_RESET;
  51:../User/BSP/bsp_tim.c ****   if (polarity == SET)
  52:../User/BSP/bsp_tim.c ****   {
  53:../User/BSP/bsp_tim.c ****     pwm_polarity = SET;
  54:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcPolarity = TIM_OC_POLARITY_HIGH;
  55:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNPolarity = TIM_OCN_POLARITY_HIGH;
  56:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcIdleState = TIM_OC_IDLE_STATE_RESET;
  57:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNIdleState = TIM_OC_IDLE_STATE_RESET;
  58:../User/BSP/bsp_tim.c ****   }
  59:../User/BSP/bsp_tim.c ****   else
  60:../User/BSP/bsp_tim.c ****   {
  61:../User/BSP/bsp_tim.c ****     pwm_polarity = RESET;
  62:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcPolarity = TIM_OC_POLARITY_LOW;
  63:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNPolarity = TIM_OCN_POLARITY_LOW;
  64:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcIdleState = TIM_OC_IDLE_STATE_SET;
  65:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNIdleState = TIM_OC_IDLE_STATE_SET;
  66:../User/BSP/bsp_tim.c ****   }
  67:../User/BSP/bsp_tim.c ****   TIM_Output_Channel1_Initialize(TIM1, &TIM1_OCInitStructure);
  68:../User/BSP/bsp_tim.c ****   TIM_Output_Channel2_Initialize(TIM1, &TIM1_OCInitStructure);
  69:../User/BSP/bsp_tim.c ****   TIM_Output_Channel3_Initialize(TIM1, &TIM1_OCInitStructure);
  70:../User/BSP/bsp_tim.c ****   TIM_Output_Channel4_Initialize(TIM1, &TIM1_OCInitStructure);
  71:../User/BSP/bsp_tim.c ****   // Enables the TIM1 Preload on CC1,CC2,CC3,CC4 Register
  72:../User/BSP/bsp_tim.c ****   TIM_Output_Channel1_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  73:../User/BSP/bsp_tim.c ****   TIM_Output_Channel2_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  74:../User/BSP/bsp_tim.c ****   TIM_Output_Channel3_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  75:../User/BSP/bsp_tim.c ****   TIM_Output_Channel4_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  76:../User/BSP/bsp_tim.c **** 
  77:../User/BSP/bsp_tim.c ****   TIM_Compare4_D_Set(TIM1, (TimerPeriod >> 1) - 20); // Ê¹ÓÃCC4²úÉúÖÐ¶Ï£¬ÒòÎªÒªÔÚÏòÏÂ¼ÆÊýÊ±²úÉúÖÐ¶Ï
  78:../User/BSP/bsp_tim.c ****   // Í¨µÀ7¡¢8¡¢9ÓÃ»§´¥·¢ADC TRGO
  79:../User/BSP/bsp_tim.c ****   TIM_Compare7_Set(TIM1, TimerPeriod >> 1);
  80:../User/BSP/bsp_tim.c ****   TIM_Compare8_Set(TIM1, TimerPeriod >> 1);
  81:../User/BSP/bsp_tim.c ****   TIM_Compare9_Set(TIM1, TimerPeriod >> 1);
  82:../User/BSP/bsp_tim.c ****   TIM_Output_Channel7_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  83:../User/BSP/bsp_tim.c ****   TIM_Output_Channel8_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  84:../User/BSP/bsp_tim.c ****   TIM_Output_Channel9_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
  85:../User/BSP/bsp_tim.c **** 
  86:../User/BSP/bsp_tim.c ****   TIM_OC7REF_Trigger_To_ADC_Enable(TIM1);
  87:../User/BSP/bsp_tim.c ****   TIM_OC8REF_Trigger_To_ADC_Enable(TIM1);
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 3


  88:../User/BSP/bsp_tim.c ****   TIM_OC9REF_Trigger_To_ADC_Enable(TIM1);
  89:../User/BSP/bsp_tim.c ****   TIM_Output_Trigger_Select(TIM1, TIM_TRGO_SRC_OC4_7_8_9REF);                                      
  90:../User/BSP/bsp_tim.c ****   TIM_Base_Center_Aligned_Mode_OC4_7_8_9_Trigger_Set(TIM1, TIM_UP_COUNTING_OC4_7_8_9_TRIGGER_VALID)
  91:../User/BSP/bsp_tim.c **** 
  92:../User/BSP/bsp_tim.c ****   // Automatic Output enable, Break, dead time and lock configuration
  93:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.OssrState = TIM_OSSR_STATE_ENABLE;
  94:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.OssiState = TIM_OSSI_STATE_ENABLE;
  95:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.LockLevel = TIM_LOCK_LEVEL_OFF;
  96:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.DeadTime = 63;
  97:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.Break = TIM_BREAK_IN_ENABLE;
  98:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.BreakPolarity = TIM_BREAK_POLARITY_HIGH;
  99:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.AutomaticOutput = TIM_AUTO_OUTPUT_DISABLE; // TIM_AUTO_OUTPUT_ENABLE;		//¹
 100:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.IomBreakEn = false;
 101:../User/BSP/bsp_tim.c ****   TIM_Break_And_Dead_Time_Set(TIM1, &TIM1_BDTRInitStructure);
 102:../User/BSP/bsp_tim.c **** 
 103:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OutputState = TIM_OUTPUT_STATE_ENABLE;
 104:../User/BSP/bsp_tim.c ****   TIM_Output_Channel1_Initialize(TIM2, &TIM1_OCInitStructure);
 105:../User/BSP/bsp_tim.c ****   TIM_Output_Channel1_Preload_Set(TIM2, TIM_OC_PRELOAD_ENABLE);
 106:../User/BSP/bsp_tim.c **** 
 107:../User/BSP/bsp_tim.c ****   TIM_Asymmetric_Enable(TIM1); // Ê¹ÄÜÖÐÑë·Ç¶Ô³Æ
 108:../User/BSP/bsp_tim.c **** 
 109:../User/BSP/bsp_tim.c ****   TIM_Output_Trigger_Select(TIM1, TIM_TRGO_SRC_ENABLE);          // Ê¹ÓÃÊ¹ÄÜÐÅºÅ×÷Îª´¥·¢Êä³ö
 110:../User/BSP/bsp_tim.c ****   TIM_Trigger_Source_Select(TIM1, TIM_TRIG_SEL_TI1F_ED);         // ½« TIM1 ÅäÖÃÎª´ÓÄ£Ê½²¢½ÓÊÕ TI1 
 111:../User/BSP/bsp_tim.c ****   TIM_Slave_Mode_Select(TIM1, TIM_SLAVE_MODE_TRIG);              // ½« TIM1 ÅäÖÃÎª´¥·¢Ä£Ê½¡£
 112:../User/BSP/bsp_tim.c ****   TIM_Master_Slave_Mode_Set(TIM1, TIM_MASTER_SLAVE_MODE_ENABLE); // ½« TIM1 ÅäÖÃÎªÖ÷/´ÓÄ£Ê½¡£
 113:../User/BSP/bsp_tim.c ****   TIM_Trigger_Source_Select(TIM2, TIM_TRIG_SEL_IN_TR0);          // ½« TIM1 ´¥·¢Êä³öÁ¬½Óµ½ TIM2¡£
 114:../User/BSP/bsp_tim.c ****   TIM_Slave_Mode_Select(TIM2, TIM_SLAVE_MODE_TRIG);              // ½« TIM1 ÅäÖÃÎª´¥·¢Ä£Ê½¡£
 115:../User/BSP/bsp_tim.c **** 
 116:../User/BSP/bsp_tim.c ****   // TIM1 counter enable
 117:../User/BSP/bsp_tim.c ****   //		TIM_On(TIM2);
 118:../User/BSP/bsp_tim.c ****   TIM_On(TIM1);
 119:../User/BSP/bsp_tim.c **** 
 120:../User/BSP/bsp_tim.c ****   TIM_Interrupt_Enable(TIM1, TIM_INT_CC4);
 121:../User/BSP/bsp_tim.c ****   TIM_Interrupt_Enable(TIM2, TIM_INT_UPDATE);
 122:../User/BSP/bsp_tim.c **** 
 123:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannel = TIM1_CC_IRQn;
 124:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 125:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 126:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 127:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 128:../User/BSP/bsp_tim.c **** 
 129:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannel = TIM1_BRK_IRQn;
 130:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 131:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 132:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 133:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 134:../User/BSP/bsp_tim.c **** 
 135:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;
 136:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 137:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 138:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 139:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 140:../User/BSP/bsp_tim.c **** 
 141:../User/BSP/bsp_tim.c ****   TIM_Output_Trigger_Select(TIM1, TIM_TRGO_SRC_OC4_7_8_9REF); // ÔÚÖÐÐÄ¶ÔÆäÊ±Ñ¡Ôñ´¥·¢Ô´
 142:../User/BSP/bsp_tim.c **** }
 143:../User/BSP/bsp_tim.c **** 
 144:../User/BSP/bsp_tim.c **** /**************************************************************************************************
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 4


 145:../User/BSP/bsp_tim.c **** * Description   : Set the output of inverter bridge arms
 146:../User/BSP/bsp_tim.c **** *                 for motor control run/stop, capacitance charge of bootstrap circuit, brake
 147:../User/BSP/bsp_tim.c **** * Input         : option
 148:../User/BSP/bsp_tim.c ****                     INV_ALL_ON: all inverter arms turn on
 149:../User/BSP/bsp_tim.c ****                     INV_ALL_OFF: all inverter arms turn off (inverter stop)
 150:../User/BSP/bsp_tim.c ****                     INV_MOTOR_BRAKE: all inverter down arms turn on, up arms turn off
 151:../User/BSP/bsp_tim.c ****                     INV_U_CHARGE: only U phase arm turn on        ch0
 152:../User/BSP/bsp_tim.c ****                     INV_V_CHARGE: only V phase arm turn on        ch1
 153:../User/BSP/bsp_tim.c ****                     INV_W_CHARGE: only W phase arm turn on        ch2
 154:../User/BSP/bsp_tim.c **** * Return:       : none
 155:../User/BSP/bsp_tim.c **** **************************************************************************************************/
 156:../User/BSP/bsp_tim.c **** void __attribute__((section(".RamFunc"))) switch_pwm(PWMStatus option)
 157:../User/BSP/bsp_tim.c **** {
  29              		.loc 1 157 1
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 16
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33 0000 80B5     		push	{r7, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 7, -8
  37              		.cfi_offset 14, -4
  38 0002 84B0     		sub	sp, sp, #16
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 24
  41 0004 00AF     		add	r7, sp, #0
  42              	.LCFI2:
  43              		.cfi_def_cfa_register 7
  44 0006 0346     		mov	r3, r0
  45 0008 FB71     		strb	r3, [r7, #7]
 158:../User/BSP/bsp_tim.c ****   uint32_t reg_temp = TIM1->CCEN;
  46              		.loc 1 158 27
  47 000a 804B     		ldr	r3, .L23
  48              		.loc 1 158 12
  49 000c 1B6A     		ldr	r3, [r3, #32]
  50 000e FB60     		str	r3, [r7, #12]
 159:../User/BSP/bsp_tim.c ****   if (pwm_polarity == RESET)
  51              		.loc 1 159 20
  52 0010 7F4B     		ldr	r3, .L23+4
  53 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  54              		.loc 1 159 6
  55 0014 002B     		cmp	r3, #0
  56 0016 05D1     		bne	.L2
 160:../User/BSP/bsp_tim.c ****   {
 161:../User/BSP/bsp_tim.c ****     reg_temp |= (TIM_CCEN_CC1EN | TIM_CCEN_CC2EN | TIM_CCEN_CC3EN | TIM_CCEN_CC1NEN | TIM_CCEN_CC2N
  57              		.loc 1 161 14
  58 0018 FB68     		ldr	r3, [r7, #12]
  59 001a 43F4AA63 		orr	r3, r3, #1360
  60 001e 43F00503 		orr	r3, r3, #5
  61 0022 FB60     		str	r3, [r7, #12]
  62              	.L2:
 162:../User/BSP/bsp_tim.c ****   }
 163:../User/BSP/bsp_tim.c ****   {
 164:../User/BSP/bsp_tim.c ****     switch (option)
  63              		.loc 1 164 5
  64 0024 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
  65 0026 062B     		cmp	r3, #6
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 5


  66 0028 00F2E580 		bhi	.L3
  67 002c 01A2     		adr	r2, .L5
  68 002e 52F823F0 		ldr	pc, [r2, r3, lsl #2]
  69 0032 00BF     		.p2align 2
  70              	.L5:
  71 0034 51000000 		.word	.L11+1
  72 0038 59000000 		.word	.L10+1
  73 003c 83000000 		.word	.L9+1
  74 0040 FB000000 		.word	.L8+1
  75 0044 73010000 		.word	.L7+1
  76 0048 9F010000 		.word	.L6+1
  77 004c CB010000 		.word	.L4+1
  78              		.p2align 1
  79              	.L11:
 165:../User/BSP/bsp_tim.c ****     {
 166:../User/BSP/bsp_tim.c ****     case INV_ALL_OFF: /* 0x00 */
 167:../User/BSP/bsp_tim.c ****       /* turn off 6-phases (up/vp/wp, un/vn/wn) */
 168:../User/BSP/bsp_tim.c ****       /* timer_periph channels output disable */
 169:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Disable(TIM1); // ±£»¤µçÆ½ÉèÖÃºó¹Ø×ÜÊä³ö¾Í¿ÉÒÔ
  80              		.loc 1 169 7
  81 0050 6E48     		ldr	r0, .L23
  82 0052 FFF7FEFF 		bl	TIM_PWM_Output_Disable
 170:../User/BSP/bsp_tim.c ****       break;
  83              		.loc 1 170 7
  84 0056 D5E0     		b	.L12
  85              	.L10:
 171:../User/BSP/bsp_tim.c ****     case INV_ALL_ON:
 172:../User/BSP/bsp_tim.c ****       /* turn on 6-phases (up/vp/wp, un/vn/wn) */
 173:../User/BSP/bsp_tim.c ****       /* timer_periph channels output enable */
 174:../User/BSP/bsp_tim.c ****       reg_temp |= (TIM_CCEN_CC1EN | TIM_CCEN_CC2EN | TIM_CCEN_CC3EN | TIM_CCEN_CC1NEN | TIM_CCEN_CC
  86              		.loc 1 174 16
  87 0058 FB68     		ldr	r3, [r7, #12]
  88 005a 43F4AA63 		orr	r3, r3, #1360
  89 005e 43F00503 		orr	r3, r3, #5
  90 0062 FB60     		str	r3, [r7, #12]
 175:../User/BSP/bsp_tim.c ****       TIM1->CCEN = reg_temp;
  91              		.loc 1 175 11
  92 0064 694A     		ldr	r2, .L23
  93              		.loc 1 175 18
  94 0066 FB68     		ldr	r3, [r7, #12]
  95 0068 1362     		str	r3, [r2, #32]
 176:../User/BSP/bsp_tim.c ****       TIM_Interrupt_Status_Clear(TIM1, TIM_STS_BITF); /* clear interrupt request flag */
  96              		.loc 1 176 7
  97 006a 8021     		movs	r1, #128
  98 006c 6748     		ldr	r0, .L23
  99 006e FFF7FEFF 		bl	TIM_Interrupt_Status_Clear
 177:../User/BSP/bsp_tim.c ****       TIM_Interrupt_Enable(TIM1, TIM_INT_BREAK);      /* ´ò¿ªÖÐ¶Ï */
 100              		.loc 1 177 7
 101 0072 8021     		movs	r1, #128
 102 0074 6548     		ldr	r0, .L23
 103 0076 FFF7FEFF 		bl	TIM_Interrupt_Enable
 178:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Enable(TIM1);
 104              		.loc 1 178 7
 105 007a 6448     		ldr	r0, .L23
 106 007c FFF7FEFF 		bl	TIM_PWM_Output_Enable
 179:../User/BSP/bsp_tim.c ****       break;
 107              		.loc 1 179 7
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 6


 108 0080 C0E0     		b	.L12
 109              	.L9:
 180:../User/BSP/bsp_tim.c ****     case INV_MOTOR_BRAKE: // É²³µ
 181:../User/BSP/bsp_tim.c **** 
 182:../User/BSP/bsp_tim.c ****       if (pwm_polarity == RESET)
 110              		.loc 1 182 24
 111 0082 634B     		ldr	r3, .L23+4
 112 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 113              		.loc 1 182 10
 114 0086 002B     		cmp	r3, #0
 115 0088 18D1     		bne	.L13
 183:../User/BSP/bsp_tim.c ****       {
 184:../User/BSP/bsp_tim.c ****         //                                GDÂëÅäÖÃÁËCH3EN´ýÈ·ÈÏ
 185:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC1EN));
 116              		.loc 1 185 18
 117 008a FB68     		ldr	r3, [r7, #12]
 118 008c 23F00103 		bic	r3, r3, #1
 119 0090 FB60     		str	r3, [r7, #12]
 186:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC2EN));
 120              		.loc 1 186 18
 121 0092 FB68     		ldr	r3, [r7, #12]
 122 0094 23F01003 		bic	r3, r3, #16
 123 0098 FB60     		str	r3, [r7, #12]
 187:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC3EN));
 124              		.loc 1 187 18
 125 009a FB68     		ldr	r3, [r7, #12]
 126 009c 23F48073 		bic	r3, r3, #256
 127 00a0 FB60     		str	r3, [r7, #12]
 188:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC1NEN));
 128              		.loc 1 188 18
 129 00a2 FB68     		ldr	r3, [r7, #12]
 130 00a4 43F00403 		orr	r3, r3, #4
 131 00a8 FB60     		str	r3, [r7, #12]
 189:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC2NEN));
 132              		.loc 1 189 18
 133 00aa FB68     		ldr	r3, [r7, #12]
 134 00ac 43F04003 		orr	r3, r3, #64
 135 00b0 FB60     		str	r3, [r7, #12]
 190:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC3NEN));
 136              		.loc 1 190 18
 137 00b2 FB68     		ldr	r3, [r7, #12]
 138 00b4 43F48063 		orr	r3, r3, #1024
 139 00b8 FB60     		str	r3, [r7, #12]
 140 00ba 17E0     		b	.L14
 141              	.L13:
 191:../User/BSP/bsp_tim.c ****       }
 192:../User/BSP/bsp_tim.c ****       else
 193:../User/BSP/bsp_tim.c ****       {
 194:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC1NEN));
 142              		.loc 1 194 18
 143 00bc FB68     		ldr	r3, [r7, #12]
 144 00be 23F00403 		bic	r3, r3, #4
 145 00c2 FB60     		str	r3, [r7, #12]
 195:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC2NEN));
 146              		.loc 1 195 18
 147 00c4 FB68     		ldr	r3, [r7, #12]
 148 00c6 23F04003 		bic	r3, r3, #64
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 7


 149 00ca FB60     		str	r3, [r7, #12]
 196:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC3NEN));
 150              		.loc 1 196 18
 151 00cc FB68     		ldr	r3, [r7, #12]
 152 00ce 23F48063 		bic	r3, r3, #1024
 153 00d2 FB60     		str	r3, [r7, #12]
 197:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC1EN));
 154              		.loc 1 197 18
 155 00d4 FB68     		ldr	r3, [r7, #12]
 156 00d6 43F00103 		orr	r3, r3, #1
 157 00da FB60     		str	r3, [r7, #12]
 198:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC2EN));
 158              		.loc 1 198 18
 159 00dc FB68     		ldr	r3, [r7, #12]
 160 00de 43F01003 		orr	r3, r3, #16
 161 00e2 FB60     		str	r3, [r7, #12]
 199:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC3EN));
 162              		.loc 1 199 18
 163 00e4 FB68     		ldr	r3, [r7, #12]
 164 00e6 43F48073 		orr	r3, r3, #256
 165 00ea FB60     		str	r3, [r7, #12]
 166              	.L14:
 200:../User/BSP/bsp_tim.c ****       }
 201:../User/BSP/bsp_tim.c **** 
 202:../User/BSP/bsp_tim.c ****       TIM1->CCEN = (uint32_t)reg_temp; // ÉÏ¹ÜÓÐÐ§£¬ÏÂ¹ÜÎÞÐ§
 167              		.loc 1 202 11
 168 00ec 474A     		ldr	r2, .L23
 169              		.loc 1 202 18
 170 00ee FB68     		ldr	r3, [r7, #12]
 171 00f0 1362     		str	r3, [r2, #32]
 203:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Enable(TIM1);
 172              		.loc 1 203 7
 173 00f2 4648     		ldr	r0, .L23
 174 00f4 FFF7FEFF 		bl	TIM_PWM_Output_Enable
 204:../User/BSP/bsp_tim.c ****       break;
 175              		.loc 1 204 7
 176 00f8 84E0     		b	.L12
 177              	.L8:
 205:../User/BSP/bsp_tim.c ****     case INV_UVW_CHARGE:
 206:../User/BSP/bsp_tim.c **** 
 207:../User/BSP/bsp_tim.c ****       if (pwm_polarity == SET)
 178              		.loc 1 207 24
 179 00fa 454B     		ldr	r3, .L23+4
 180 00fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 181              		.loc 1 207 10
 182 00fe 012B     		cmp	r3, #1
 183 0100 18D1     		bne	.L15
 208:../User/BSP/bsp_tim.c ****       {
 209:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC1EN));
 184              		.loc 1 209 18
 185 0102 FB68     		ldr	r3, [r7, #12]
 186 0104 23F00103 		bic	r3, r3, #1
 187 0108 FB60     		str	r3, [r7, #12]
 210:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC2EN));
 188              		.loc 1 210 18
 189 010a FB68     		ldr	r3, [r7, #12]
 190 010c 23F01003 		bic	r3, r3, #16
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 8


 191 0110 FB60     		str	r3, [r7, #12]
 211:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC3EN));
 192              		.loc 1 211 18
 193 0112 FB68     		ldr	r3, [r7, #12]
 194 0114 23F48073 		bic	r3, r3, #256
 195 0118 FB60     		str	r3, [r7, #12]
 212:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC1NEN));
 196              		.loc 1 212 18
 197 011a FB68     		ldr	r3, [r7, #12]
 198 011c 43F00403 		orr	r3, r3, #4
 199 0120 FB60     		str	r3, [r7, #12]
 213:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC2NEN));
 200              		.loc 1 213 18
 201 0122 FB68     		ldr	r3, [r7, #12]
 202 0124 43F04003 		orr	r3, r3, #64
 203 0128 FB60     		str	r3, [r7, #12]
 214:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC3NEN));
 204              		.loc 1 214 18
 205 012a FB68     		ldr	r3, [r7, #12]
 206 012c 43F48063 		orr	r3, r3, #1024
 207 0130 FB60     		str	r3, [r7, #12]
 208 0132 17E0     		b	.L16
 209              	.L15:
 215:../User/BSP/bsp_tim.c ****       }
 216:../User/BSP/bsp_tim.c ****       else
 217:../User/BSP/bsp_tim.c ****       {
 218:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC1NEN));
 210              		.loc 1 218 18
 211 0134 FB68     		ldr	r3, [r7, #12]
 212 0136 23F00403 		bic	r3, r3, #4
 213 013a FB60     		str	r3, [r7, #12]
 219:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC2NEN));
 214              		.loc 1 219 18
 215 013c FB68     		ldr	r3, [r7, #12]
 216 013e 23F04003 		bic	r3, r3, #64
 217 0142 FB60     		str	r3, [r7, #12]
 220:../User/BSP/bsp_tim.c ****         reg_temp &= (uint32_t)(~((uint32_t)TIM_CCEN_CC3NEN));
 218              		.loc 1 220 18
 219 0144 FB68     		ldr	r3, [r7, #12]
 220 0146 23F48063 		bic	r3, r3, #1024
 221 014a FB60     		str	r3, [r7, #12]
 221:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC1EN));
 222              		.loc 1 221 18
 223 014c FB68     		ldr	r3, [r7, #12]
 224 014e 43F00103 		orr	r3, r3, #1
 225 0152 FB60     		str	r3, [r7, #12]
 222:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC2EN));
 226              		.loc 1 222 18
 227 0154 FB68     		ldr	r3, [r7, #12]
 228 0156 43F01003 		orr	r3, r3, #16
 229 015a FB60     		str	r3, [r7, #12]
 223:../User/BSP/bsp_tim.c ****         reg_temp |= (uint32_t)(((uint32_t)TIM_CCEN_CC3EN));
 230              		.loc 1 223 18
 231 015c FB68     		ldr	r3, [r7, #12]
 232 015e 43F48073 		orr	r3, r3, #256
 233 0162 FB60     		str	r3, [r7, #12]
 234              	.L16:
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 9


 224:../User/BSP/bsp_tim.c ****       }
 225:../User/BSP/bsp_tim.c **** 
 226:../User/BSP/bsp_tim.c ****       TIM1->CCEN = (uint32_t)reg_temp; // ÏÂ¹ÜÓÐÐ§£¬ÉÏ¹ÜÎÞÐ§
 235              		.loc 1 226 11
 236 0164 294A     		ldr	r2, .L23
 237              		.loc 1 226 18
 238 0166 FB68     		ldr	r3, [r7, #12]
 239 0168 1362     		str	r3, [r2, #32]
 227:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Enable(TIM1);
 240              		.loc 1 227 7
 241 016a 2848     		ldr	r0, .L23
 242 016c FFF7FEFF 		bl	TIM_PWM_Output_Enable
 228:../User/BSP/bsp_tim.c ****       break;
 243              		.loc 1 228 7
 244 0170 48E0     		b	.L12
 245              	.L7:
 229:../User/BSP/bsp_tim.c ****     case INV_U_CHARGE:
 230:../User/BSP/bsp_tim.c ****       if (pwm_polarity == RESET)
 246              		.loc 1 230 24
 247 0172 274B     		ldr	r3, .L23+4
 248 0174 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 249              		.loc 1 230 10
 250 0176 002B     		cmp	r3, #0
 251 0178 04D1     		bne	.L17
 231:../User/BSP/bsp_tim.c ****       {
 232:../User/BSP/bsp_tim.c ****         reg_temp &= ~TIM_CCEN_CC1P;
 252              		.loc 1 232 18
 253 017a FB68     		ldr	r3, [r7, #12]
 254 017c 23F00203 		bic	r3, r3, #2
 255 0180 FB60     		str	r3, [r7, #12]
 256 0182 03E0     		b	.L18
 257              	.L17:
 233:../User/BSP/bsp_tim.c ****       }
 234:../User/BSP/bsp_tim.c ****       else
 235:../User/BSP/bsp_tim.c ****       {
 236:../User/BSP/bsp_tim.c ****         reg_temp |= TIM_CCEN_CC1P;
 258              		.loc 1 236 18
 259 0184 FB68     		ldr	r3, [r7, #12]
 260 0186 43F00203 		orr	r3, r3, #2
 261 018a FB60     		str	r3, [r7, #12]
 262              	.L18:
 237:../User/BSP/bsp_tim.c ****       }
 238:../User/BSP/bsp_tim.c ****       TIM1->CCEN = (uint32_t)reg_temp | TIM_CCEN_CC1NEN; // UÏàÏÂ¹ÜÊä³ö ÆäËûÎÞÐ§Êä³ö
 263              		.loc 1 238 11
 264 018c 1F4A     		ldr	r2, .L23
 265              		.loc 1 238 39
 266 018e FB68     		ldr	r3, [r7, #12]
 267 0190 43F00403 		orr	r3, r3, #4
 268              		.loc 1 238 18
 269 0194 1362     		str	r3, [r2, #32]
 239:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Enable(TIM1);
 270              		.loc 1 239 7
 271 0196 1D48     		ldr	r0, .L23
 272 0198 FFF7FEFF 		bl	TIM_PWM_Output_Enable
 240:../User/BSP/bsp_tim.c ****       break;
 273              		.loc 1 240 7
 274 019c 32E0     		b	.L12
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 10


 275              	.L6:
 241:../User/BSP/bsp_tim.c ****     case INV_V_CHARGE:
 242:../User/BSP/bsp_tim.c ****       if (pwm_polarity == RESET)
 276              		.loc 1 242 24
 277 019e 1C4B     		ldr	r3, .L23+4
 278 01a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 279              		.loc 1 242 10
 280 01a2 002B     		cmp	r3, #0
 281 01a4 04D1     		bne	.L19
 243:../User/BSP/bsp_tim.c ****       {
 244:../User/BSP/bsp_tim.c ****         reg_temp &= ~TIM_CCEN_CC2P;
 282              		.loc 1 244 18
 283 01a6 FB68     		ldr	r3, [r7, #12]
 284 01a8 23F02003 		bic	r3, r3, #32
 285 01ac FB60     		str	r3, [r7, #12]
 286 01ae 03E0     		b	.L20
 287              	.L19:
 245:../User/BSP/bsp_tim.c ****       }
 246:../User/BSP/bsp_tim.c ****       else
 247:../User/BSP/bsp_tim.c ****       {
 248:../User/BSP/bsp_tim.c ****         reg_temp |= TIM_CCEN_CC2P;
 288              		.loc 1 248 18
 289 01b0 FB68     		ldr	r3, [r7, #12]
 290 01b2 43F02003 		orr	r3, r3, #32
 291 01b6 FB60     		str	r3, [r7, #12]
 292              	.L20:
 249:../User/BSP/bsp_tim.c ****       }
 250:../User/BSP/bsp_tim.c ****       /* set inverter bridge arm (VH) as "High" and output enable */
 251:../User/BSP/bsp_tim.c ****       TIM1->CCEN = (uint32_t)reg_temp | TIM_CCEN_CC2NEN; // VÏàÏÂ¹ÜÊä³ö ÆäËûÎÞÐ§Êä³ö
 293              		.loc 1 251 11
 294 01b8 144A     		ldr	r2, .L23
 295              		.loc 1 251 39
 296 01ba FB68     		ldr	r3, [r7, #12]
 297 01bc 43F04003 		orr	r3, r3, #64
 298              		.loc 1 251 18
 299 01c0 1362     		str	r3, [r2, #32]
 252:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Enable(TIM1);
 300              		.loc 1 252 7
 301 01c2 1248     		ldr	r0, .L23
 302 01c4 FFF7FEFF 		bl	TIM_PWM_Output_Enable
 253:../User/BSP/bsp_tim.c ****       break;
 303              		.loc 1 253 7
 304 01c8 1CE0     		b	.L12
 305              	.L4:
 254:../User/BSP/bsp_tim.c ****     case INV_W_CHARGE:
 255:../User/BSP/bsp_tim.c ****       if (pwm_polarity == RESET)
 306              		.loc 1 255 24
 307 01ca 114B     		ldr	r3, .L23+4
 308 01cc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 309              		.loc 1 255 10
 310 01ce 002B     		cmp	r3, #0
 311 01d0 04D1     		bne	.L21
 256:../User/BSP/bsp_tim.c ****       {
 257:../User/BSP/bsp_tim.c ****         reg_temp &= ~TIM_CCEN_CC3P;
 312              		.loc 1 257 18
 313 01d2 FB68     		ldr	r3, [r7, #12]
 314 01d4 23F40073 		bic	r3, r3, #512
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 11


 315 01d8 FB60     		str	r3, [r7, #12]
 316 01da 03E0     		b	.L22
 317              	.L21:
 258:../User/BSP/bsp_tim.c ****       }
 259:../User/BSP/bsp_tim.c ****       else
 260:../User/BSP/bsp_tim.c ****       {
 261:../User/BSP/bsp_tim.c ****         reg_temp |= TIM_CCEN_CC3P;
 318              		.loc 1 261 18
 319 01dc FB68     		ldr	r3, [r7, #12]
 320 01de 43F40073 		orr	r3, r3, #512
 321 01e2 FB60     		str	r3, [r7, #12]
 322              	.L22:
 262:../User/BSP/bsp_tim.c ****       }
 263:../User/BSP/bsp_tim.c ****       /* set inverter bridge arm (WH) as "High" and output enable */
 264:../User/BSP/bsp_tim.c ****       TIM1->CCEN = (uint32_t)reg_temp | TIM_CCEN_CC3NEN; // WÏàÏÂ¹ÜÊä³ö ÆäËûÎÞÐ§Êä³ö
 323              		.loc 1 264 11
 324 01e4 094A     		ldr	r2, .L23
 325              		.loc 1 264 39
 326 01e6 FB68     		ldr	r3, [r7, #12]
 327 01e8 43F48063 		orr	r3, r3, #1024
 328              		.loc 1 264 18
 329 01ec 1362     		str	r3, [r2, #32]
 265:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Enable(TIM1);
 330              		.loc 1 265 7
 331 01ee 0748     		ldr	r0, .L23
 332 01f0 FFF7FEFF 		bl	TIM_PWM_Output_Enable
 266:../User/BSP/bsp_tim.c ****       break;
 333              		.loc 1 266 7
 334 01f4 06E0     		b	.L12
 335              	.L3:
 267:../User/BSP/bsp_tim.c ****     default: /* invalid arguments */
 268:../User/BSP/bsp_tim.c ****       /* turn off 6-phases (up/vp/wp, un/vn/wn) */
 269:../User/BSP/bsp_tim.c ****       /* timer_periph channels output disable */
 270:../User/BSP/bsp_tim.c ****       TIM_PWM_Output_Disable(TIM1);
 336              		.loc 1 270 7
 337 01f6 0548     		ldr	r0, .L23
 338 01f8 FFF7FEFF 		bl	TIM_PWM_Output_Disable
 271:../User/BSP/bsp_tim.c ****       TIM1->CCEN = (uint32_t)reg_temp;
 339              		.loc 1 271 11
 340 01fc 034A     		ldr	r2, .L23
 341              		.loc 1 271 18
 342 01fe FB68     		ldr	r3, [r7, #12]
 343 0200 1362     		str	r3, [r2, #32]
 272:../User/BSP/bsp_tim.c ****       break;
 344              		.loc 1 272 7
 345 0202 00BF     		nop
 346              	.L12:
 273:../User/BSP/bsp_tim.c ****     }
 274:../User/BSP/bsp_tim.c ****   }
 275:../User/BSP/bsp_tim.c **** }
 347              		.loc 1 275 1
 348 0204 00BF     		nop
 349 0206 1037     		adds	r7, r7, #16
 350              	.LCFI3:
 351              		.cfi_def_cfa_offset 8
 352 0208 BD46     		mov	sp, r7
 353              	.LCFI4:
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 12


 354              		.cfi_def_cfa_register 13
 355              		@ sp needed
 356 020a 80BD     		pop	{r7, pc}
 357              	.L24:
 358              		.align	2
 359              	.L23:
 360 020c 002C0140 		.word	1073818624
 361 0210 00000000 		.word	pwm_polarity
 362              		.cfi_endproc
 363              	.LFE131:
 365              		.align	1
 366              		.global	pwm_duty_set
 367              		.syntax unified
 368              		.thumb
 369              		.thumb_func
 371              	pwm_duty_set:
 372              	.LFB132:
 276:../User/BSP/bsp_tim.c **** 
 277:../User/BSP/bsp_tim.c **** /******************************************************************************
 278:../User/BSP/bsp_tim.c **** * Description   : PWM duty set for inverter control
 279:../User/BSP/bsp_tim.c **** * Input         : timer_periph
 280:../User/BSP/bsp_tim.c ****                     COMP_TIMER;
 281:../User/BSP/bsp_tim.c ****                     FAN_TIMER;
 282:../User/BSP/bsp_tim.c **** * Input         : uduty;vduty;wduty
 283:../User/BSP/bsp_tim.c ****                     0-COMP_PWM_COUNT_SET;
 284:../User/BSP/bsp_tim.c **** * Input         : uphase_value;vdutyvphase_value;wphase_value
 285:../User/BSP/bsp_tim.c **** ******************************************************************************/
 286:../User/BSP/bsp_tim.c **** void __attribute__((section(".RamFunc"))) pwm_duty_set(uint16_t duty1, uint16_t duty2, uint16_t dut
 287:../User/BSP/bsp_tim.c **** {
 373              		.loc 1 287 1
 374              		.cfi_startproc
 375              		@ args = 0, pretend = 0, frame = 8
 376              		@ frame_needed = 1, uses_anonymous_args = 0
 377 0214 80B5     		push	{r7, lr}
 378              	.LCFI5:
 379              		.cfi_def_cfa_offset 8
 380              		.cfi_offset 7, -8
 381              		.cfi_offset 14, -4
 382 0216 82B0     		sub	sp, sp, #8
 383              	.LCFI6:
 384              		.cfi_def_cfa_offset 16
 385 0218 00AF     		add	r7, sp, #0
 386              	.LCFI7:
 387              		.cfi_def_cfa_register 7
 388 021a 0346     		mov	r3, r0
 389 021c FB80     		strh	r3, [r7, #6]	@ movhi
 390 021e 0B46     		mov	r3, r1	@ movhi
 391 0220 BB80     		strh	r3, [r7, #4]	@ movhi
 392 0222 1346     		mov	r3, r2	@ movhi
 393 0224 7B80     		strh	r3, [r7, #2]	@ movhi
 288:../User/BSP/bsp_tim.c ****   TIM_Compare1_Set(TIM1, duty1); // UÏàÕ¼¿Õ±È
 394              		.loc 1 288 3
 395 0226 FB88     		ldrh	r3, [r7, #6]
 396 0228 1946     		mov	r1, r3
 397 022a 1748     		ldr	r0, .L26
 398 022c FFF7FEFF 		bl	TIM_Compare1_Set
 289:../User/BSP/bsp_tim.c ****   TIM_Compare2_Set(TIM1, duty2); // VÏàÕ¼¿Õ±È
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 13


 399              		.loc 1 289 3
 400 0230 BB88     		ldrh	r3, [r7, #4]
 401 0232 1946     		mov	r1, r3
 402 0234 1448     		ldr	r0, .L26
 403 0236 FFF7FEFF 		bl	TIM_Compare2_Set
 290:../User/BSP/bsp_tim.c ****   TIM_Compare3_Set(TIM1, duty3); // WÏàÕ¼¿Õ±È
 404              		.loc 1 290 3
 405 023a 7B88     		ldrh	r3, [r7, #2]
 406 023c 1946     		mov	r1, r3
 407 023e 1248     		ldr	r0, .L26
 408 0240 FFF7FEFF 		bl	TIM_Compare3_Set
 291:../User/BSP/bsp_tim.c **** 
 292:../User/BSP/bsp_tim.c ****   TIM_Compare7_Set(TIM1, duty1); // ÉèÖÃ´¥·¢²ÉÑùÊ±¼ä
 409              		.loc 1 292 3
 410 0244 FB88     		ldrh	r3, [r7, #6]
 411 0246 1946     		mov	r1, r3
 412 0248 0F48     		ldr	r0, .L26
 413 024a FFF7FEFF 		bl	TIM_Compare7_Set
 293:../User/BSP/bsp_tim.c ****   TIM_Compare8_Set(TIM1, duty2);
 414              		.loc 1 293 3
 415 024e BB88     		ldrh	r3, [r7, #4]
 416 0250 1946     		mov	r1, r3
 417 0252 0D48     		ldr	r0, .L26
 418 0254 FFF7FEFF 		bl	TIM_Compare8_Set
 294:../User/BSP/bsp_tim.c ****   TIM_Compare9_Set(TIM1, duty3);
 419              		.loc 1 294 3
 420 0258 7B88     		ldrh	r3, [r7, #2]
 421 025a 1946     		mov	r1, r3
 422 025c 0A48     		ldr	r0, .L26
 423 025e FFF7FEFF 		bl	TIM_Compare9_Set
 295:../User/BSP/bsp_tim.c **** 
 296:../User/BSP/bsp_tim.c ****   TIM_Compare1_D_Set(TIM1, duty1); // UÏà ÖÐÑë·Ç¶Ô³ÆÄ£Ê½ÏòÏÂ¼ÆÊýÖµ£¬¿ÉÒÔ×ÔÓÉ¸ü¸ÄARÖµ~1
 424              		.loc 1 296 3
 425 0262 FB88     		ldrh	r3, [r7, #6]
 426 0264 1946     		mov	r1, r3
 427 0266 0848     		ldr	r0, .L26
 428 0268 FFF7FEFF 		bl	TIM_Compare1_D_Set
 297:../User/BSP/bsp_tim.c ****   TIM_Compare2_D_Set(TIM1, duty2); // VÏà
 429              		.loc 1 297 3
 430 026c BB88     		ldrh	r3, [r7, #4]
 431 026e 1946     		mov	r1, r3
 432 0270 0548     		ldr	r0, .L26
 433 0272 FFF7FEFF 		bl	TIM_Compare2_D_Set
 298:../User/BSP/bsp_tim.c ****   TIM_Compare3_D_Set(TIM1, duty3); // WÏà
 434              		.loc 1 298 3
 435 0276 7B88     		ldrh	r3, [r7, #2]
 436 0278 1946     		mov	r1, r3
 437 027a 0348     		ldr	r0, .L26
 438 027c FFF7FEFF 		bl	TIM_Compare3_D_Set
 299:../User/BSP/bsp_tim.c **** }
 439              		.loc 1 299 1
 440 0280 00BF     		nop
 441 0282 0837     		adds	r7, r7, #8
 442              	.LCFI8:
 443              		.cfi_def_cfa_offset 8
 444 0284 BD46     		mov	sp, r7
 445              	.LCFI9:
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 14


 446              		.cfi_def_cfa_register 13
 447              		@ sp needed
 448 0286 80BD     		pop	{r7, pc}
 449              	.L27:
 450              		.align	2
 451              	.L26:
 452 0288 002C0140 		.word	1073818624
 453              		.cfi_endproc
 454              	.LFE132:
 456              		.global	pwm_polarity
 457              		.section	.bss.pwm_polarity,"aw",%nobits
 460              	pwm_polarity:
 461 0000 00       		.space	1
 462              		.global	GPTIMClockFrequency
 463              		.section	.bss.GPTIMClockFrequency,"aw",%nobits
 464              		.align	1
 467              	GPTIMClockFrequency:
 468 0000 0000     		.space	2
 469              		.global	TIM_Freq_buff
 470              		.section	.bss.TIM_Freq_buff,"aw",%nobits
 471              		.align	2
 474              	TIM_Freq_buff:
 475 0000 00000000 		.space	12
 475      00000000 
 475      00000000 
 476              		.section	.text.TIM1_PWM_Init,"ax",%progbits
 477              		.align	1
 478              		.global	TIM1_PWM_Init
 479              		.syntax unified
 480              		.thumb
 481              		.thumb_func
 483              	TIM1_PWM_Init:
 484              	.LFB130:
  14:../User/BSP/bsp_tim.c ****   TIM_TimeBaseInitType TIM1_TimeBaseStructure;
 485              		.loc 1 14 1
 486              		.cfi_startproc
 487              		@ args = 0, pretend = 0, frame = 72
 488              		@ frame_needed = 1, uses_anonymous_args = 0
 489 0000 80B5     		push	{r7, lr}
 490              	.LCFI10:
 491              		.cfi_def_cfa_offset 8
 492              		.cfi_offset 7, -8
 493              		.cfi_offset 14, -4
 494 0002 92B0     		sub	sp, sp, #72
 495              	.LCFI11:
 496              		.cfi_def_cfa_offset 80
 497 0004 00AF     		add	r7, sp, #0
 498              	.LCFI12:
 499              		.cfi_def_cfa_register 7
 500 0006 0346     		mov	r3, r0
 501 0008 FB71     		strb	r3, [r7, #7]
  20:../User/BSP/bsp_tim.c **** 
 502              		.loc 1 20 12
 503 000a 0023     		movs	r3, #0
 504 000c A7F84630 		strh	r3, [r7, #70]	@ movhi
  22:../User/BSP/bsp_tim.c **** 
 505              		.loc 1 22 62
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 15


 506 0010 A74B     		ldr	r3, .L31
 507 0012 1B68     		ldr	r3, [r3]
 508 0014 A74A     		ldr	r2, .L31+4
 509 0016 A2FB0323 		umull	r2, r3, r2, r3
 510 001a 9B0A     		lsrs	r3, r3, #10
  22:../User/BSP/bsp_tim.c **** 
 511              		.loc 1 22 15
 512 001c A7F84630 		strh	r3, [r7, #70]	@ movhi
  25:../User/BSP/bsp_tim.c ****   TIM_Base_Struct_Initialize(&TIM1_TimeBaseStructure);
 513              		.loc 1 25 3
 514 0020 A548     		ldr	r0, .L31+8
 515 0022 FFF7FEFF 		bl	TIM_Reset
  26:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Prescaler = TIMER_CLOCK_PRESCALER_SET;
 516              		.loc 1 26 3
 517 0026 07F13403 		add	r3, r7, #52
 518 002a 1846     		mov	r0, r3
 519 002c FFF7FEFF 		bl	TIM_Base_Struct_Initialize
  27:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.CntMode = TIM_CNT_MODE_CENTER_ALIGN1; // 01: \,irq flag only counter down
 520              		.loc 1 27 36
 521 0030 0323     		movs	r3, #3
 522 0032 BB86     		strh	r3, [r7, #52]	@ movhi
  28:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Period = TimerPeriod;
 523              		.loc 1 28 34
 524 0034 2023     		movs	r3, #32
 525 0036 FB86     		strh	r3, [r7, #54]	@ movhi
  29:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.ClkDiv = TIM_CLK_DIV4; // 4·ÖÆµ
 526              		.loc 1 29 33
 527 0038 B7F84630 		ldrh	r3, [r7, #70]	@ movhi
 528 003c 3B87     		strh	r3, [r7, #56]	@ movhi
  30:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.RepetCnt = 0;
 529              		.loc 1 30 33
 530 003e 4FF40073 		mov	r3, #512
 531 0042 7B87     		strh	r3, [r7, #58]	@ movhi
  31:../User/BSP/bsp_tim.c **** 
 532              		.loc 1 31 35
 533 0044 0023     		movs	r3, #0
 534 0046 87F83C30 		strb	r3, [r7, #60]
  33:../User/BSP/bsp_tim.c **** 
 535              		.loc 1 33 3
 536 004a 07F13403 		add	r3, r7, #52
 537 004e 1946     		mov	r1, r3
 538 0050 9948     		ldr	r0, .L31+8
 539 0052 FFF7FEFF 		bl	TIM_Base_Initialize
  35:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Prescaler = 0;
 540              		.loc 1 35 3
 541 0056 4FF08040 		mov	r0, #1073741824
 542 005a FFF7FEFF 		bl	TIM_Reset
  36:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.CntMode = TIM_CNT_MODE_UP;
 543              		.loc 1 36 36
 544 005e 0023     		movs	r3, #0
 545 0060 BB86     		strh	r3, [r7, #52]	@ movhi
  37:../User/BSP/bsp_tim.c ****   TIM1_TimeBaseStructure.Period = TimerPeriod * 2 - 1; // TIM1¡¢TIM2¶¼ÊÇ¹¤×÷ÔÚ30Mhz,¼ÆÊýÖµÎª*2-1
 546              		.loc 1 37 34
 547 0062 0023     		movs	r3, #0
 548 0064 FB86     		strh	r3, [r7, #54]	@ movhi
  38:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM2, &TIM1_TimeBaseStructure);  // ÅäÖÃ¶¨Ê±Æ÷2
 549              		.loc 1 38 51
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 16


 550 0066 B7F84630 		ldrh	r3, [r7, #70]	@ movhi
 551 006a 5B00     		lsls	r3, r3, #1
 552 006c 9BB2     		uxth	r3, r3
 553 006e 013B     		subs	r3, r3, #1
 554 0070 9BB2     		uxth	r3, r3
  38:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM2, &TIM1_TimeBaseStructure);  // ÅäÖÃ¶¨Ê±Æ÷2
 555              		.loc 1 38 33
 556 0072 3B87     		strh	r3, [r7, #56]	@ movhi
  39:../User/BSP/bsp_tim.c **** 
 557              		.loc 1 39 3
 558 0074 07F13403 		add	r3, r7, #52
 559 0078 1946     		mov	r1, r3
 560 007a 4FF08040 		mov	r0, #1073741824
 561 007e FFF7FEFF 		bl	TIM_Base_Initialize
  43:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OutputState = TIM_OUTPUT_STATE_DISABLE;
 562              		.loc 1 43 31
 563 0082 7023     		movs	r3, #112
 564 0084 BB84     		strh	r3, [r7, #36]	@ movhi
  44:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OutputNState = TIM_OUTPUT_NSTATE_DISABLE;
 565              		.loc 1 44 36
 566 0086 0023     		movs	r3, #0
 567 0088 FB84     		strh	r3, [r7, #38]	@ movhi
  45:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.Pulse = (TimerPeriod >> 1); // ÅäÖÃÎªÖÐÑë·Ç¶Ô³ÆÄ£Ê½£¬8Î»ÎªÏòÏÂ¼ÆÊýÖµ£¬µ±Ç°Îª
 568              		.loc 1 45 37
 569 008a 0023     		movs	r3, #0
 570 008c 3B85     		strh	r3, [r7, #40]	@ movhi
  46:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcPolarity = TIM_OC_POLARITY_HIGH;
 571              		.loc 1 46 30
 572 008e B7F84630 		ldrh	r3, [r7, #70]
 573 0092 5B08     		lsrs	r3, r3, #1
 574 0094 9BB2     		uxth	r3, r3
 575 0096 7B85     		strh	r3, [r7, #42]	@ movhi
  47:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcNPolarity = TIM_OCN_POLARITY_HIGH;
 576              		.loc 1 47 35
 577 0098 0023     		movs	r3, #0
 578 009a BB85     		strh	r3, [r7, #44]	@ movhi
  48:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcIdleState = TIM_OC_IDLE_STATE_RESET;
 579              		.loc 1 48 36
 580 009c 0023     		movs	r3, #0
 581 009e FB85     		strh	r3, [r7, #46]	@ movhi
  49:../User/BSP/bsp_tim.c ****   TIM1_OCInitStructure.OcNIdleState = TIM_OC_IDLE_STATE_RESET;
 582              		.loc 1 49 36
 583 00a0 0023     		movs	r3, #0
 584 00a2 3B86     		strh	r3, [r7, #48]	@ movhi
  50:../User/BSP/bsp_tim.c ****   if (polarity == SET)
 585              		.loc 1 50 37
 586 00a4 0023     		movs	r3, #0
 587 00a6 7B86     		strh	r3, [r7, #50]	@ movhi
  51:../User/BSP/bsp_tim.c ****   {
 588              		.loc 1 51 6
 589 00a8 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 590 00aa 012B     		cmp	r3, #1
 591 00ac 0BD1     		bne	.L29
  53:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcPolarity = TIM_OC_POLARITY_HIGH;
 592              		.loc 1 53 18
 593 00ae 834B     		ldr	r3, .L31+12
 594 00b0 0122     		movs	r2, #1
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 17


 595 00b2 1A70     		strb	r2, [r3]
  54:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNPolarity = TIM_OCN_POLARITY_HIGH;
 596              		.loc 1 54 37
 597 00b4 0023     		movs	r3, #0
 598 00b6 BB85     		strh	r3, [r7, #44]	@ movhi
  55:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcIdleState = TIM_OC_IDLE_STATE_RESET;
 599              		.loc 1 55 38
 600 00b8 0023     		movs	r3, #0
 601 00ba FB85     		strh	r3, [r7, #46]	@ movhi
  56:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNIdleState = TIM_OC_IDLE_STATE_RESET;
 602              		.loc 1 56 38
 603 00bc 0023     		movs	r3, #0
 604 00be 3B86     		strh	r3, [r7, #48]	@ movhi
  57:../User/BSP/bsp_tim.c ****   }
 605              		.loc 1 57 39
 606 00c0 0023     		movs	r3, #0
 607 00c2 7B86     		strh	r3, [r7, #50]	@ movhi
 608 00c4 0CE0     		b	.L30
 609              	.L29:
  61:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcPolarity = TIM_OC_POLARITY_LOW;
 610              		.loc 1 61 18
 611 00c6 7D4B     		ldr	r3, .L31+12
 612 00c8 0022     		movs	r2, #0
 613 00ca 1A70     		strb	r2, [r3]
  62:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNPolarity = TIM_OCN_POLARITY_LOW;
 614              		.loc 1 62 37
 615 00cc 0223     		movs	r3, #2
 616 00ce BB85     		strh	r3, [r7, #44]	@ movhi
  63:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcIdleState = TIM_OC_IDLE_STATE_SET;
 617              		.loc 1 63 38
 618 00d0 0823     		movs	r3, #8
 619 00d2 FB85     		strh	r3, [r7, #46]	@ movhi
  64:../User/BSP/bsp_tim.c ****     TIM1_OCInitStructure.OcNIdleState = TIM_OC_IDLE_STATE_SET;
 620              		.loc 1 64 38
 621 00d4 4FF48073 		mov	r3, #256
 622 00d8 3B86     		strh	r3, [r7, #48]	@ movhi
  65:../User/BSP/bsp_tim.c ****   }
 623              		.loc 1 65 39
 624 00da 4FF48073 		mov	r3, #256
 625 00de 7B86     		strh	r3, [r7, #50]	@ movhi
 626              	.L30:
  67:../User/BSP/bsp_tim.c ****   TIM_Output_Channel2_Initialize(TIM1, &TIM1_OCInitStructure);
 627              		.loc 1 67 3
 628 00e0 07F12403 		add	r3, r7, #36
 629 00e4 1946     		mov	r1, r3
 630 00e6 7448     		ldr	r0, .L31+8
 631 00e8 FFF7FEFF 		bl	TIM_Output_Channel1_Initialize
  68:../User/BSP/bsp_tim.c ****   TIM_Output_Channel3_Initialize(TIM1, &TIM1_OCInitStructure);
 632              		.loc 1 68 3
 633 00ec 07F12403 		add	r3, r7, #36
 634 00f0 1946     		mov	r1, r3
 635 00f2 7148     		ldr	r0, .L31+8
 636 00f4 FFF7FEFF 		bl	TIM_Output_Channel2_Initialize
  69:../User/BSP/bsp_tim.c ****   TIM_Output_Channel4_Initialize(TIM1, &TIM1_OCInitStructure);
 637              		.loc 1 69 3
 638 00f8 07F12403 		add	r3, r7, #36
 639 00fc 1946     		mov	r1, r3
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 18


 640 00fe 6E48     		ldr	r0, .L31+8
 641 0100 FFF7FEFF 		bl	TIM_Output_Channel3_Initialize
  70:../User/BSP/bsp_tim.c ****   // Enables the TIM1 Preload on CC1,CC2,CC3,CC4 Register
 642              		.loc 1 70 3
 643 0104 07F12403 		add	r3, r7, #36
 644 0108 1946     		mov	r1, r3
 645 010a 6B48     		ldr	r0, .L31+8
 646 010c FFF7FEFF 		bl	TIM_Output_Channel4_Initialize
  72:../User/BSP/bsp_tim.c ****   TIM_Output_Channel2_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
 647              		.loc 1 72 3
 648 0110 0821     		movs	r1, #8
 649 0112 6948     		ldr	r0, .L31+8
 650 0114 FFF7FEFF 		bl	TIM_Output_Channel1_Preload_Set
  73:../User/BSP/bsp_tim.c ****   TIM_Output_Channel3_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
 651              		.loc 1 73 3
 652 0118 0821     		movs	r1, #8
 653 011a 6748     		ldr	r0, .L31+8
 654 011c FFF7FEFF 		bl	TIM_Output_Channel2_Preload_Set
  74:../User/BSP/bsp_tim.c ****   TIM_Output_Channel4_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
 655              		.loc 1 74 3
 656 0120 0821     		movs	r1, #8
 657 0122 6548     		ldr	r0, .L31+8
 658 0124 FFF7FEFF 		bl	TIM_Output_Channel3_Preload_Set
  75:../User/BSP/bsp_tim.c **** 
 659              		.loc 1 75 3
 660 0128 0821     		movs	r1, #8
 661 012a 6348     		ldr	r0, .L31+8
 662 012c FFF7FEFF 		bl	TIM_Output_Channel4_Preload_Set
  77:../User/BSP/bsp_tim.c ****   // Í¨µÀ7¡¢8¡¢9ÓÃ»§´¥·¢ADC TRGO
 663              		.loc 1 77 3
 664 0130 B7F84630 		ldrh	r3, [r7, #70]
 665 0134 5B08     		lsrs	r3, r3, #1
 666 0136 9BB2     		uxth	r3, r3
 667 0138 143B     		subs	r3, r3, #20
 668 013a 9BB2     		uxth	r3, r3
 669 013c 1946     		mov	r1, r3
 670 013e 5E48     		ldr	r0, .L31+8
 671 0140 FFF7FEFF 		bl	TIM_Compare4_D_Set
  79:../User/BSP/bsp_tim.c ****   TIM_Compare8_Set(TIM1, TimerPeriod >> 1);
 672              		.loc 1 79 3
 673 0144 B7F84630 		ldrh	r3, [r7, #70]
 674 0148 5B08     		lsrs	r3, r3, #1
 675 014a 9BB2     		uxth	r3, r3
 676 014c 1946     		mov	r1, r3
 677 014e 5A48     		ldr	r0, .L31+8
 678 0150 FFF7FEFF 		bl	TIM_Compare7_Set
  80:../User/BSP/bsp_tim.c ****   TIM_Compare9_Set(TIM1, TimerPeriod >> 1);
 679              		.loc 1 80 3
 680 0154 B7F84630 		ldrh	r3, [r7, #70]
 681 0158 5B08     		lsrs	r3, r3, #1
 682 015a 9BB2     		uxth	r3, r3
 683 015c 1946     		mov	r1, r3
 684 015e 5648     		ldr	r0, .L31+8
 685 0160 FFF7FEFF 		bl	TIM_Compare8_Set
  81:../User/BSP/bsp_tim.c ****   TIM_Output_Channel7_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
 686              		.loc 1 81 3
 687 0164 B7F84630 		ldrh	r3, [r7, #70]
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 19


 688 0168 5B08     		lsrs	r3, r3, #1
 689 016a 9BB2     		uxth	r3, r3
 690 016c 1946     		mov	r1, r3
 691 016e 5248     		ldr	r0, .L31+8
 692 0170 FFF7FEFF 		bl	TIM_Compare9_Set
  82:../User/BSP/bsp_tim.c ****   TIM_Output_Channel8_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
 693              		.loc 1 82 3
 694 0174 0821     		movs	r1, #8
 695 0176 5048     		ldr	r0, .L31+8
 696 0178 FFF7FEFF 		bl	TIM_Output_Channel7_Preload_Set
  83:../User/BSP/bsp_tim.c ****   TIM_Output_Channel9_Preload_Set(TIM1, TIM_OC_PRELOAD_ENABLE);
 697              		.loc 1 83 3
 698 017c 0821     		movs	r1, #8
 699 017e 4E48     		ldr	r0, .L31+8
 700 0180 FFF7FEFF 		bl	TIM_Output_Channel8_Preload_Set
  84:../User/BSP/bsp_tim.c **** 
 701              		.loc 1 84 3
 702 0184 0821     		movs	r1, #8
 703 0186 4C48     		ldr	r0, .L31+8
 704 0188 FFF7FEFF 		bl	TIM_Output_Channel9_Preload_Set
  86:../User/BSP/bsp_tim.c ****   TIM_OC8REF_Trigger_To_ADC_Enable(TIM1);
 705              		.loc 1 86 3
 706 018c 4A48     		ldr	r0, .L31+8
 707 018e FFF7FEFF 		bl	TIM_OC7REF_Trigger_To_ADC_Enable
  87:../User/BSP/bsp_tim.c ****   TIM_OC9REF_Trigger_To_ADC_Enable(TIM1);
 708              		.loc 1 87 3
 709 0192 4948     		ldr	r0, .L31+8
 710 0194 FFF7FEFF 		bl	TIM_OC8REF_Trigger_To_ADC_Enable
  88:../User/BSP/bsp_tim.c ****   TIM_Output_Trigger_Select(TIM1, TIM_TRGO_SRC_OC4_7_8_9REF);                                      
 711              		.loc 1 88 3
 712 0198 4748     		ldr	r0, .L31+8
 713 019a FFF7FEFF 		bl	TIM_OC9REF_Trigger_To_ADC_Enable
  89:../User/BSP/bsp_tim.c ****   TIM_Base_Center_Aligned_Mode_OC4_7_8_9_Trigger_Set(TIM1, TIM_UP_COUNTING_OC4_7_8_9_TRIGGER_VALID)
 714              		.loc 1 89 3
 715 019e 0021     		movs	r1, #0
 716 01a0 4548     		ldr	r0, .L31+8
 717 01a2 FFF7FEFF 		bl	TIM_Output_Trigger_Select
  90:../User/BSP/bsp_tim.c **** 
 718              		.loc 1 90 3
 719 01a6 0021     		movs	r1, #0
 720 01a8 4348     		ldr	r0, .L31+8
 721 01aa FFF7FEFF 		bl	TIM_Base_Center_Aligned_Mode_OC4_7_8_9_Trigger_Set
  93:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.OssiState = TIM_OSSI_STATE_ENABLE;
 722              		.loc 1 93 36
 723 01ae 4FF40063 		mov	r3, #2048
 724 01b2 3B82     		strh	r3, [r7, #16]	@ movhi
  94:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.LockLevel = TIM_LOCK_LEVEL_OFF;
 725              		.loc 1 94 36
 726 01b4 4FF48063 		mov	r3, #1024
 727 01b8 7B82     		strh	r3, [r7, #18]	@ movhi
  95:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.DeadTime = 63;
 728              		.loc 1 95 36
 729 01ba 0023     		movs	r3, #0
 730 01bc BB82     		strh	r3, [r7, #20]	@ movhi
  96:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.Break = TIM_BREAK_IN_ENABLE;
 731              		.loc 1 96 35
 732 01be 3F23     		movs	r3, #63
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 20


 733 01c0 FB82     		strh	r3, [r7, #22]	@ movhi
  97:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.BreakPolarity = TIM_BREAK_POLARITY_HIGH;
 734              		.loc 1 97 32
 735 01c2 4FF48053 		mov	r3, #4096
 736 01c6 3B83     		strh	r3, [r7, #24]	@ movhi
  98:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.AutomaticOutput = TIM_AUTO_OUTPUT_DISABLE; // TIM_AUTO_OUTPUT_ENABLE;		//¹
 737              		.loc 1 98 40
 738 01c8 4FF40053 		mov	r3, #8192
 739 01cc 7B83     		strh	r3, [r7, #26]	@ movhi
  99:../User/BSP/bsp_tim.c ****   TIM1_BDTRInitStructure.IomBreakEn = false;
 740              		.loc 1 99 42
 741 01ce 0023     		movs	r3, #0
 742 01d0 BB83     		strh	r3, [r7, #28]	@ movhi
 100:../User/BSP/bsp_tim.c ****   TIM_Break_And_Dead_Time_Set(TIM1, &TIM1_BDTRInitStructure);
 743              		.loc 1 100 37
 744 01d2 0023     		movs	r3, #0
 745 01d4 BB77     		strb	r3, [r7, #30]
 101:../User/BSP/bsp_tim.c **** 
 746              		.loc 1 101 3
 747 01d6 07F11003 		add	r3, r7, #16
 748 01da 1946     		mov	r1, r3
 749 01dc 3648     		ldr	r0, .L31+8
 750 01de FFF7FEFF 		bl	TIM_Break_And_Dead_Time_Set
 103:../User/BSP/bsp_tim.c ****   TIM_Output_Channel1_Initialize(TIM2, &TIM1_OCInitStructure);
 751              		.loc 1 103 36
 752 01e2 0123     		movs	r3, #1
 753 01e4 FB84     		strh	r3, [r7, #38]	@ movhi
 104:../User/BSP/bsp_tim.c ****   TIM_Output_Channel1_Preload_Set(TIM2, TIM_OC_PRELOAD_ENABLE);
 754              		.loc 1 104 3
 755 01e6 07F12403 		add	r3, r7, #36
 756 01ea 1946     		mov	r1, r3
 757 01ec 4FF08040 		mov	r0, #1073741824
 758 01f0 FFF7FEFF 		bl	TIM_Output_Channel1_Initialize
 105:../User/BSP/bsp_tim.c **** 
 759              		.loc 1 105 3
 760 01f4 0821     		movs	r1, #8
 761 01f6 4FF08040 		mov	r0, #1073741824
 762 01fa FFF7FEFF 		bl	TIM_Output_Channel1_Preload_Set
 107:../User/BSP/bsp_tim.c **** 
 763              		.loc 1 107 3
 764 01fe 2E48     		ldr	r0, .L31+8
 765 0200 FFF7FEFF 		bl	TIM_Asymmetric_Enable
 109:../User/BSP/bsp_tim.c ****   TIM_Trigger_Source_Select(TIM1, TIM_TRIG_SEL_TI1F_ED);         // ½« TIM1 ÅäÖÃÎª´ÓÄ£Ê½²¢½ÓÊÕ TI1 
 766              		.loc 1 109 3
 767 0204 1021     		movs	r1, #16
 768 0206 2C48     		ldr	r0, .L31+8
 769 0208 FFF7FEFF 		bl	TIM_Output_Trigger_Select
 110:../User/BSP/bsp_tim.c ****   TIM_Slave_Mode_Select(TIM1, TIM_SLAVE_MODE_TRIG);              // ½« TIM1 ÅäÖÃÎª´¥·¢Ä£Ê½¡£
 770              		.loc 1 110 3
 771 020c 4021     		movs	r1, #64
 772 020e 2A48     		ldr	r0, .L31+8
 773 0210 FFF7FEFF 		bl	TIM_Trigger_Source_Select
 111:../User/BSP/bsp_tim.c ****   TIM_Master_Slave_Mode_Set(TIM1, TIM_MASTER_SLAVE_MODE_ENABLE); // ½« TIM1 ÅäÖÃÎªÖ÷/´ÓÄ£Ê½¡£
 774              		.loc 1 111 3
 775 0214 0621     		movs	r1, #6
 776 0216 2848     		ldr	r0, .L31+8
 777 0218 FFF7FEFF 		bl	TIM_Slave_Mode_Select
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 21


 112:../User/BSP/bsp_tim.c ****   TIM_Trigger_Source_Select(TIM2, TIM_TRIG_SEL_IN_TR0);          // ½« TIM1 ´¥·¢Êä³öÁ¬½Óµ½ TIM2¡£
 778              		.loc 1 112 3
 779 021c 8021     		movs	r1, #128
 780 021e 2648     		ldr	r0, .L31+8
 781 0220 FFF7FEFF 		bl	TIM_Master_Slave_Mode_Set
 113:../User/BSP/bsp_tim.c ****   TIM_Slave_Mode_Select(TIM2, TIM_SLAVE_MODE_TRIG);              // ½« TIM1 ÅäÖÃÎª´¥·¢Ä£Ê½¡£
 782              		.loc 1 113 3
 783 0224 0021     		movs	r1, #0
 784 0226 4FF08040 		mov	r0, #1073741824
 785 022a FFF7FEFF 		bl	TIM_Trigger_Source_Select
 114:../User/BSP/bsp_tim.c **** 
 786              		.loc 1 114 3
 787 022e 0621     		movs	r1, #6
 788 0230 4FF08040 		mov	r0, #1073741824
 789 0234 FFF7FEFF 		bl	TIM_Slave_Mode_Select
 118:../User/BSP/bsp_tim.c **** 
 790              		.loc 1 118 3
 791 0238 1F48     		ldr	r0, .L31+8
 792 023a FFF7FEFF 		bl	TIM_On
 120:../User/BSP/bsp_tim.c ****   TIM_Interrupt_Enable(TIM2, TIM_INT_UPDATE);
 793              		.loc 1 120 3
 794 023e 1021     		movs	r1, #16
 795 0240 1D48     		ldr	r0, .L31+8
 796 0242 FFF7FEFF 		bl	TIM_Interrupt_Enable
 121:../User/BSP/bsp_tim.c **** 
 797              		.loc 1 121 3
 798 0246 0121     		movs	r1, #1
 799 0248 4FF08040 		mov	r0, #1073741824
 800 024c FFF7FEFF 		bl	TIM_Interrupt_Enable
 123:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 801              		.loc 1 123 38
 802 0250 1A23     		movs	r3, #26
 803 0252 3B73     		strb	r3, [r7, #12]
 124:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 804              		.loc 1 124 56
 805 0254 0023     		movs	r3, #0
 806 0256 7B73     		strb	r3, [r7, #13]
 125:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 807              		.loc 1 125 49
 808 0258 0123     		movs	r3, #1
 809 025a BB73     		strb	r3, [r7, #14]
 126:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 810              		.loc 1 126 41
 811 025c 0123     		movs	r3, #1
 812 025e FB73     		strb	r3, [r7, #15]
 127:../User/BSP/bsp_tim.c **** 
 813              		.loc 1 127 3
 814 0260 07F10C03 		add	r3, r7, #12
 815 0264 1846     		mov	r0, r3
 816 0266 FFF7FEFF 		bl	NVIC_Initializes
 129:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 817              		.loc 1 129 38
 818 026a 1723     		movs	r3, #23
 819 026c 3B73     		strb	r3, [r7, #12]
 130:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 820              		.loc 1 130 56
 821 026e 0023     		movs	r3, #0
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 22


 822 0270 7B73     		strb	r3, [r7, #13]
 131:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 823              		.loc 1 131 49
 824 0272 0123     		movs	r3, #1
 825 0274 BB73     		strb	r3, [r7, #14]
 132:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 826              		.loc 1 132 41
 827 0276 0123     		movs	r3, #1
 828 0278 FB73     		strb	r3, [r7, #15]
 133:../User/BSP/bsp_tim.c **** 
 829              		.loc 1 133 3
 830 027a 07F10C03 		add	r3, r7, #12
 831 027e 1846     		mov	r0, r3
 832 0280 FFF7FEFF 		bl	NVIC_Initializes
 135:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 833              		.loc 1 135 38
 834 0284 1B23     		movs	r3, #27
 835 0286 3B73     		strb	r3, [r7, #12]
 136:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 836              		.loc 1 136 56
 837 0288 0023     		movs	r3, #0
 838 028a 7B73     		strb	r3, [r7, #13]
 137:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 839              		.loc 1 137 49
 840 028c 0123     		movs	r3, #1
 841 028e BB73     		strb	r3, [r7, #14]
 138:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 842              		.loc 1 138 41
 843 0290 0123     		movs	r3, #1
 844 0292 FB73     		strb	r3, [r7, #15]
 139:../User/BSP/bsp_tim.c **** 
 845              		.loc 1 139 3
 846 0294 07F10C03 		add	r3, r7, #12
 847 0298 1846     		mov	r0, r3
 848 029a FFF7FEFF 		bl	NVIC_Initializes
 141:../User/BSP/bsp_tim.c **** }
 849              		.loc 1 141 3
 850 029e 0021     		movs	r1, #0
 851 02a0 0548     		ldr	r0, .L31+8
 852 02a2 FFF7FEFF 		bl	TIM_Output_Trigger_Select
 142:../User/BSP/bsp_tim.c **** 
 853              		.loc 1 142 1
 854 02a6 00BF     		nop
 855 02a8 4837     		adds	r7, r7, #72
 856              	.LCFI13:
 857              		.cfi_def_cfa_offset 8
 858 02aa BD46     		mov	sp, r7
 859              	.LCFI14:
 860              		.cfi_def_cfa_register 13
 861              		@ sp needed
 862 02ac 80BD     		pop	{r7, pc}
 863              	.L32:
 864 02ae 00BF     		.align	2
 865              	.L31:
 866 02b0 00000000 		.word	SystemClockFrequency
 867 02b4 F1197605 		.word	91625969
 868 02b8 002C0140 		.word	1073818624
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 23


 869 02bc 00000000 		.word	pwm_polarity
 870              		.cfi_endproc
 871              	.LFE130:
 873              		.section	.text.TIM6_1Khz_Init,"ax",%progbits
 874              		.align	1
 875              		.global	TIM6_1Khz_Init
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 880              	TIM6_1Khz_Init:
 881              	.LFB133:
 300:../User/BSP/bsp_tim.c **** 
 301:../User/BSP/bsp_tim.c **** /*************************************************************
 302:../User/BSP/bsp_tim.c ****  * ¶¨Ê±Æ÷6  1msÖÐ¶Ï
 303:../User/BSP/bsp_tim.c ****  *************************************************************/
 304:../User/BSP/bsp_tim.c **** void TIM6_1Khz_Init(void)
 305:../User/BSP/bsp_tim.c **** {
 882              		.loc 1 305 1
 883              		.cfi_startproc
 884              		@ args = 0, pretend = 0, frame = 48
 885              		@ frame_needed = 1, uses_anonymous_args = 0
 886 0000 80B5     		push	{r7, lr}
 887              	.LCFI15:
 888              		.cfi_def_cfa_offset 8
 889              		.cfi_offset 7, -8
 890              		.cfi_offset 14, -4
 891 0002 8CB0     		sub	sp, sp, #48
 892              	.LCFI16:
 893              		.cfi_def_cfa_offset 56
 894 0004 00AF     		add	r7, sp, #0
 895              	.LCFI17:
 896              		.cfi_def_cfa_register 7
 306:../User/BSP/bsp_tim.c ****   uint32_t prescaler_value;
 307:../User/BSP/bsp_tim.c ****   RCC_ClocksType RCC_Clocks;
 308:../User/BSP/bsp_tim.c ****   TIM_TimeBaseInitType TIM_TimeBaseStructure;
 309:../User/BSP/bsp_tim.c ****   NVIC_InitType NVIC_InitStructure;
 310:../User/BSP/bsp_tim.c **** 
 311:../User/BSP/bsp_tim.c ****   RCC_Clocks_Frequencies_Value_Get(&RCC_Clocks);
 897              		.loc 1 311 3
 898 0006 07F11403 		add	r3, r7, #20
 899 000a 1846     		mov	r0, r3
 900 000c FFF7FEFF 		bl	RCC_Clocks_Frequencies_Value_Get
 312:../User/BSP/bsp_tim.c **** 
 313:../User/BSP/bsp_tim.c ****   if (RCC_Clocks.HclkFreq > RCC_Clocks.Pclk1Freq)
 901              		.loc 1 313 17
 902 0010 BA69     		ldr	r2, [r7, #24]
 903              		.loc 1 313 39
 904 0012 FB69     		ldr	r3, [r7, #28]
 905              		.loc 1 313 6
 906 0014 9A42     		cmp	r2, r3
 907 0016 03D9     		bls	.L34
 314:../User/BSP/bsp_tim.c ****   {
 315:../User/BSP/bsp_tim.c ****     prescaler_value = RCC_Clocks.Pclk1Freq * 2;
 908              		.loc 1 315 33
 909 0018 FB69     		ldr	r3, [r7, #28]
 910              		.loc 1 315 21
 911 001a 5B00     		lsls	r3, r3, #1
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 24


 912 001c FB62     		str	r3, [r7, #44]
 913 001e 01E0     		b	.L35
 914              	.L34:
 316:../User/BSP/bsp_tim.c ****   }
 317:../User/BSP/bsp_tim.c ****   else
 318:../User/BSP/bsp_tim.c ****   {
 319:../User/BSP/bsp_tim.c ****     prescaler_value = RCC_Clocks.Pclk1Freq;
 915              		.loc 1 319 21
 916 0020 FB69     		ldr	r3, [r7, #28]
 917 0022 FB62     		str	r3, [r7, #44]
 918              	.L35:
 320:../User/BSP/bsp_tim.c ****   }
 321:../User/BSP/bsp_tim.c **** 
 322:../User/BSP/bsp_tim.c ****   TIM_Base_Struct_Initialize(&TIM_TimeBaseStructure);
 919              		.loc 1 322 3
 920 0024 3B1D     		adds	r3, r7, #4
 921 0026 1846     		mov	r0, r3
 922 0028 FFF7FEFF 		bl	TIM_Base_Struct_Initialize
 323:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.Period = prescaler_value / 1000 / 100 - 1;
 923              		.loc 1 323 57
 924 002c FB6A     		ldr	r3, [r7, #44]
 925 002e 5B09     		lsrs	r3, r3, #5
 926 0030 164A     		ldr	r2, .L36
 927 0032 A2FB0323 		umull	r2, r3, r2, r3
 928 0036 DB09     		lsrs	r3, r3, #7
 929              		.loc 1 323 63
 930 0038 9BB2     		uxth	r3, r3
 931 003a 013B     		subs	r3, r3, #1
 932 003c 9BB2     		uxth	r3, r3
 933              		.loc 1 323 32
 934 003e 3B81     		strh	r3, [r7, #8]	@ movhi
 324:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.Prescaler = 100 - 1;
 935              		.loc 1 324 35
 936 0040 6323     		movs	r3, #99
 937 0042 BB80     		strh	r3, [r7, #4]	@ movhi
 325:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.ClkDiv = TIM_CLK_DIV1;
 938              		.loc 1 325 32
 939 0044 0023     		movs	r3, #0
 940 0046 7B81     		strh	r3, [r7, #10]	@ movhi
 326:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.CntMode = TIM_CNT_MODE_UP;
 941              		.loc 1 326 33
 942 0048 0023     		movs	r3, #0
 943 004a FB80     		strh	r3, [r7, #6]	@ movhi
 327:../User/BSP/bsp_tim.c **** 
 328:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM6, &TIM_TimeBaseStructure);
 944              		.loc 1 328 3
 945 004c 3B1D     		adds	r3, r7, #4
 946 004e 1946     		mov	r1, r3
 947 0050 0F48     		ldr	r0, .L36+4
 948 0052 FFF7FEFF 		bl	TIM_Base_Initialize
 329:../User/BSP/bsp_tim.c ****   TIM_Base_Reload_Mode_Set(TIM6, TIM_PSC_RELOAD_MODE_IMMEDIATE);
 949              		.loc 1 329 3
 950 0056 0121     		movs	r1, #1
 951 0058 0D48     		ldr	r0, .L36+4
 952 005a FFF7FEFF 		bl	TIM_Base_Reload_Mode_Set
 330:../User/BSP/bsp_tim.c **** 
 331:../User/BSP/bsp_tim.c ****   TIM_Interrupt_Enable(TIM6, TIM_INT_UPDATE);
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 25


 953              		.loc 1 331 3
 954 005e 0121     		movs	r1, #1
 955 0060 0B48     		ldr	r0, .L36+4
 956 0062 FFF7FEFF 		bl	TIM_Interrupt_Enable
 332:../User/BSP/bsp_tim.c **** 
 333:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannel = TIM6_IRQn;
 957              		.loc 1 333 38
 958 0066 3023     		movs	r3, #48
 959 0068 3B70     		strb	r3, [r7]
 334:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 960              		.loc 1 334 56
 961 006a 0023     		movs	r3, #0
 962 006c 7B70     		strb	r3, [r7, #1]
 335:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 963              		.loc 1 335 49
 964 006e 0123     		movs	r3, #1
 965 0070 BB70     		strb	r3, [r7, #2]
 336:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 966              		.loc 1 336 41
 967 0072 0123     		movs	r3, #1
 968 0074 FB70     		strb	r3, [r7, #3]
 337:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 969              		.loc 1 337 3
 970 0076 3B46     		mov	r3, r7
 971 0078 1846     		mov	r0, r3
 972 007a FFF7FEFF 		bl	NVIC_Initializes
 338:../User/BSP/bsp_tim.c **** 
 339:../User/BSP/bsp_tim.c ****   TIM_On(TIM6);
 973              		.loc 1 339 3
 974 007e 0448     		ldr	r0, .L36+4
 975 0080 FFF7FEFF 		bl	TIM_On
 340:../User/BSP/bsp_tim.c **** }
 976              		.loc 1 340 1
 977 0084 00BF     		nop
 978 0086 3037     		adds	r7, r7, #48
 979              	.LCFI18:
 980              		.cfi_def_cfa_offset 8
 981 0088 BD46     		mov	sp, r7
 982              	.LCFI19:
 983              		.cfi_def_cfa_register 13
 984              		@ sp needed
 985 008a 80BD     		pop	{r7, pc}
 986              	.L37:
 987              		.align	2
 988              	.L36:
 989 008c C55A7C0A 		.word	175921861
 990 0090 00100040 		.word	1073745920
 991              		.cfi_endproc
 992              	.LFE133:
 994              		.section	.text.TIM4_ETR_Init,"ax",%progbits
 995              		.align	1
 996              		.global	TIM4_ETR_Init
 997              		.syntax unified
 998              		.thumb
 999              		.thumb_func
 1001              	TIM4_ETR_Init:
 1002              	.LFB134:
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 26


 341:../User/BSP/bsp_tim.c **** 
 342:../User/BSP/bsp_tim.c **** /*************************************************************
 343:../User/BSP/bsp_tim.c ****  * ¶¨Ê±Æ÷4
 344:../User/BSP/bsp_tim.c ****  *************************************************************/
 345:../User/BSP/bsp_tim.c **** void TIM4_ETR_Init(void)
 346:../User/BSP/bsp_tim.c **** {
 1003              		.loc 1 346 1
 1004              		.cfi_startproc
 1005              		@ args = 0, pretend = 0, frame = 24
 1006              		@ frame_needed = 1, uses_anonymous_args = 0
 1007 0000 80B5     		push	{r7, lr}
 1008              	.LCFI20:
 1009              		.cfi_def_cfa_offset 8
 1010              		.cfi_offset 7, -8
 1011              		.cfi_offset 14, -4
 1012 0002 86B0     		sub	sp, sp, #24
 1013              	.LCFI21:
 1014              		.cfi_def_cfa_offset 32
 1015 0004 00AF     		add	r7, sp, #0
 1016              	.LCFI22:
 1017              		.cfi_def_cfa_register 7
 347:../User/BSP/bsp_tim.c ****   TIM_TimeBaseInitType TIM_TimeBaseStructure;
 348:../User/BSP/bsp_tim.c ****   NVIC_InitType NVIC_InitStructure;
 349:../User/BSP/bsp_tim.c **** 
 350:../User/BSP/bsp_tim.c ****   // Íâ²¿ÊäÈë×÷Îª¼ÆÊýÔ´£¬ÅäÖÃ·ÖÆµµÈ£¬ÏÖÔÚ²»ÉèÖÃ·ÖÆµÂË²¨
 351:../User/BSP/bsp_tim.c ****   TIM_External_Clock_Mode2_Set(TIM4, TIM_EXT_TRG_PSC_OFF, TIM_EXT_TRIG_POLARITY_NONINVERTED, 0);
 1018              		.loc 1 351 3
 1019 0006 0023     		movs	r3, #0
 1020 0008 0022     		movs	r2, #0
 1021 000a 0021     		movs	r1, #0
 1022 000c 1848     		ldr	r0, .L39
 1023 000e FFF7FEFF 		bl	TIM_External_Clock_Mode2_Set
 352:../User/BSP/bsp_tim.c **** 
 353:../User/BSP/bsp_tim.c ****   TIM_Base_Struct_Initialize(&TIM_TimeBaseStructure);
 1024              		.loc 1 353 3
 1025 0012 07F10803 		add	r3, r7, #8
 1026 0016 1846     		mov	r0, r3
 1027 0018 FFF7FEFF 		bl	TIM_Base_Struct_Initialize
 354:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.Period = 65535;
 1028              		.loc 1 354 32
 1029 001c 4FF6FF73 		movw	r3, #65535
 1030 0020 BB81     		strh	r3, [r7, #12]	@ movhi
 355:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.Prescaler = 0;
 1031              		.loc 1 355 35
 1032 0022 0023     		movs	r3, #0
 1033 0024 3B81     		strh	r3, [r7, #8]	@ movhi
 356:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.ClkDiv = TIM_CLK_DIV1;
 1034              		.loc 1 356 32
 1035 0026 0023     		movs	r3, #0
 1036 0028 FB81     		strh	r3, [r7, #14]	@ movhi
 357:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.CntMode = TIM_CNT_MODE_UP;
 1037              		.loc 1 357 33
 1038 002a 0023     		movs	r3, #0
 1039 002c 7B81     		strh	r3, [r7, #10]	@ movhi
 358:../User/BSP/bsp_tim.c **** 
 359:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM4, &TIM_TimeBaseStructure);
 1040              		.loc 1 359 3
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 27


 1041 002e 07F10803 		add	r3, r7, #8
 1042 0032 1946     		mov	r1, r3
 1043 0034 0E48     		ldr	r0, .L39
 1044 0036 FFF7FEFF 		bl	TIM_Base_Initialize
 360:../User/BSP/bsp_tim.c ****   TIM_Base_Reload_Mode_Set(TIM4, TIM_PSC_RELOAD_MODE_IMMEDIATE);
 1045              		.loc 1 360 3
 1046 003a 0121     		movs	r1, #1
 1047 003c 0C48     		ldr	r0, .L39
 1048 003e FFF7FEFF 		bl	TIM_Base_Reload_Mode_Set
 361:../User/BSP/bsp_tim.c **** 
 362:../User/BSP/bsp_tim.c ****   TIM_Interrupt_Enable(TIM4, TIM_INT_UPDATE);
 1049              		.loc 1 362 3
 1050 0042 0121     		movs	r1, #1
 1051 0044 0A48     		ldr	r0, .L39
 1052 0046 FFF7FEFF 		bl	TIM_Interrupt_Enable
 363:../User/BSP/bsp_tim.c **** 
 364:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannel = TIM4_IRQn;
 1053              		.loc 1 364 38
 1054 004a 1D23     		movs	r3, #29
 1055 004c 3B71     		strb	r3, [r7, #4]
 365:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 1;
 1056              		.loc 1 365 56
 1057 004e 0123     		movs	r3, #1
 1058 0050 7B71     		strb	r3, [r7, #5]
 366:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 1059              		.loc 1 366 49
 1060 0052 0123     		movs	r3, #1
 1061 0054 BB71     		strb	r3, [r7, #6]
 367:../User/BSP/bsp_tim.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 1062              		.loc 1 367 41
 1063 0056 0123     		movs	r3, #1
 1064 0058 FB71     		strb	r3, [r7, #7]
 368:../User/BSP/bsp_tim.c ****   NVIC_Initializes(&NVIC_InitStructure);
 1065              		.loc 1 368 3
 1066 005a 3B1D     		adds	r3, r7, #4
 1067 005c 1846     		mov	r0, r3
 1068 005e FFF7FEFF 		bl	NVIC_Initializes
 369:../User/BSP/bsp_tim.c **** 
 370:../User/BSP/bsp_tim.c ****   TIM_On(TIM4);
 1069              		.loc 1 370 3
 1070 0062 0348     		ldr	r0, .L39
 1071 0064 FFF7FEFF 		bl	TIM_On
 371:../User/BSP/bsp_tim.c **** }
 1072              		.loc 1 371 1
 1073 0068 00BF     		nop
 1074 006a 1837     		adds	r7, r7, #24
 1075              	.LCFI23:
 1076              		.cfi_def_cfa_offset 8
 1077 006c BD46     		mov	sp, r7
 1078              	.LCFI24:
 1079              		.cfi_def_cfa_register 13
 1080              		@ sp needed
 1081 006e 80BD     		pop	{r7, pc}
 1082              	.L40:
 1083              		.align	2
 1084              	.L39:
 1085 0070 00080040 		.word	1073743872
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 28


 1086              		.cfi_endproc
 1087              	.LFE134:
 1089              		.section	.text.TIM4_Capture_Config,"ax",%progbits
 1090              		.align	1
 1091              		.global	TIM4_Capture_Config
 1092              		.syntax unified
 1093              		.thumb
 1094              		.thumb_func
 1096              	TIM4_Capture_Config:
 1097              	.LFB135:
 372:../User/BSP/bsp_tim.c **** 
 373:../User/BSP/bsp_tim.c **** void TIM4_Capture_Config(void)
 374:../User/BSP/bsp_tim.c **** {
 1098              		.loc 1 374 1
 1099              		.cfi_startproc
 1100              		@ args = 0, pretend = 0, frame = 128
 1101              		@ frame_needed = 1, uses_anonymous_args = 0
 1102 0000 80B5     		push	{r7, lr}
 1103              	.LCFI25:
 1104              		.cfi_def_cfa_offset 8
 1105              		.cfi_offset 7, -8
 1106              		.cfi_offset 14, -4
 1107 0002 A0B0     		sub	sp, sp, #128
 1108              	.LCFI26:
 1109              		.cfi_def_cfa_offset 136
 1110 0004 00AF     		add	r7, sp, #0
 1111              	.LCFI27:
 1112              		.cfi_def_cfa_register 7
 375:../User/BSP/bsp_tim.c ****   GPIO_InitType GPIO_InitStructure;
 376:../User/BSP/bsp_tim.c ****   TIM_ICInitType TIM_ICInitStructure;
 377:../User/BSP/bsp_tim.c ****   TIM_TimeBaseInitType TIM_TimeBaseStructure;
 378:../User/BSP/bsp_tim.c **** 	DMA_InitType  DMA_InitStructure;
 379:../User/BSP/bsp_tim.c ****   uint32_t prescaler_value;
 380:../User/BSP/bsp_tim.c ****   RCC_ClocksType RCC_Clocks;
 381:../User/BSP/bsp_tim.c **** 
 382:../User/BSP/bsp_tim.c ****   GPIO_Structure_Initialize(&GPIO_InitStructure);
 1113              		.loc 1 382 3
 1114 0006 07F16403 		add	r3, r7, #100
 1115 000a 1846     		mov	r0, r3
 1116 000c FFF7FEFF 		bl	GPIO_Structure_Initialize
 383:../User/BSP/bsp_tim.c ****   /* TIM4 channel 1 pin (PB.06) configuration */
 384:../User/BSP/bsp_tim.c ****   GPIO_InitStructure.Pin = GPIO_PIN_6;
 1117              		.loc 1 384 26
 1118 0010 4023     		movs	r3, #64
 1119 0012 7B66     		str	r3, [r7, #100]
 385:../User/BSP/bsp_tim.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_MODE_INPUT;
 1120              		.loc 1 385 32
 1121 0014 0023     		movs	r3, #0
 1122 0016 BB66     		str	r3, [r7, #104]
 386:../User/BSP/bsp_tim.c ****   GPIO_InitStructure.GPIO_Current = GPIO_DS_4MA;
 1123              		.loc 1 386 35
 1124 0018 0223     		movs	r3, #2
 1125 001a 7B67     		str	r3, [r7, #116]
 387:../User/BSP/bsp_tim.c ****   GPIO_InitStructure.GPIO_Alternate = GPIO_AF3_TIM4;
 1126              		.loc 1 387 37
 1127 001c 0323     		movs	r3, #3
 1128 001e BB67     		str	r3, [r7, #120]
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 29


 388:../User/BSP/bsp_tim.c ****   GPIO_Peripheral_Initialize(GPIOB, &GPIO_InitStructure);
 1129              		.loc 1 388 3
 1130 0020 07F16403 		add	r3, r7, #100
 1131 0024 1946     		mov	r1, r3
 1132 0026 4648     		ldr	r0, .L44
 1133 0028 FFF7FEFF 		bl	GPIO_Peripheral_Initialize
 389:../User/BSP/bsp_tim.c **** 
 390:../User/BSP/bsp_tim.c ****   RCC_Clocks_Frequencies_Value_Get(&RCC_Clocks);
 1134              		.loc 1 390 3
 1135 002c 3B1D     		adds	r3, r7, #4
 1136 002e 1846     		mov	r0, r3
 1137 0030 FFF7FEFF 		bl	RCC_Clocks_Frequencies_Value_Get
 391:../User/BSP/bsp_tim.c **** 
 392:../User/BSP/bsp_tim.c ****   if (RCC_Clocks.HclkFreq > RCC_Clocks.Pclk1Freq)
 1138              		.loc 1 392 17
 1139 0034 BA68     		ldr	r2, [r7, #8]
 1140              		.loc 1 392 39
 1141 0036 FB68     		ldr	r3, [r7, #12]
 1142              		.loc 1 392 6
 1143 0038 9A42     		cmp	r2, r3
 1144 003a 03D9     		bls	.L42
 393:../User/BSP/bsp_tim.c ****   {
 394:../User/BSP/bsp_tim.c ****     prescaler_value = RCC_Clocks.Pclk1Freq * 2;
 1145              		.loc 1 394 33
 1146 003c FB68     		ldr	r3, [r7, #12]
 1147              		.loc 1 394 21
 1148 003e 5B00     		lsls	r3, r3, #1
 1149 0040 FB67     		str	r3, [r7, #124]
 1150 0042 01E0     		b	.L43
 1151              	.L42:
 395:../User/BSP/bsp_tim.c ****   }
 396:../User/BSP/bsp_tim.c ****   else
 397:../User/BSP/bsp_tim.c ****   {
 398:../User/BSP/bsp_tim.c ****     prescaler_value = RCC_Clocks.Pclk1Freq;
 1152              		.loc 1 398 21
 1153 0044 FB68     		ldr	r3, [r7, #12]
 1154 0046 FB67     		str	r3, [r7, #124]
 1155              	.L43:
 399:../User/BSP/bsp_tim.c ****   }
 400:../User/BSP/bsp_tim.c **** 
 401:../User/BSP/bsp_tim.c ****   GPTIMClockFrequency = prescaler_value / 1000;
 1156              		.loc 1 401 41
 1157 0048 FB6F     		ldr	r3, [r7, #124]
 1158 004a 3E4A     		ldr	r2, .L44+4
 1159 004c A2FB0323 		umull	r2, r3, r2, r3
 1160 0050 9B09     		lsrs	r3, r3, #6
 1161              		.loc 1 401 23
 1162 0052 9AB2     		uxth	r2, r3
 1163 0054 3C4B     		ldr	r3, .L44+8
 1164 0056 1A80     		strh	r2, [r3]	@ movhi
 402:../User/BSP/bsp_tim.c **** 	
 403:../User/BSP/bsp_tim.c **** 	DMA_Reset(DMA_CH2);
 1165              		.loc 1 403 2
 1166 0058 3C48     		ldr	r0, .L44+12
 1167 005a FFF7FEFF 		bl	DMA_Reset
 404:../User/BSP/bsp_tim.c **** 	DMA_Structure_Initializes(&DMA_InitStructure);
 1168              		.loc 1 404 2
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 30


 1169 005e 07F11C03 		add	r3, r7, #28
 1170 0062 1846     		mov	r0, r3
 1171 0064 FFF7FEFF 		bl	DMA_Structure_Initializes
 405:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.PeriphAddr     = (uint32_t)&TIM4->CCDAT1;
 1172              		.loc 1 405 35
 1173 0068 394B     		ldr	r3, .L44+16
 1174 006a FB61     		str	r3, [r7, #28]
 406:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.MemAddr        = (uint32_t)TIM_Freq_buff;
 1175              		.loc 1 406 37
 1176 006c 394B     		ldr	r3, .L44+20
 1177              		.loc 1 406 35
 1178 006e 3B62     		str	r3, [r7, #32]
 407:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.Direction      = DMA_DIR_PERIPH_SRC;
 1179              		.loc 1 407 35
 1180 0070 0023     		movs	r3, #0
 1181 0072 7B62     		str	r3, [r7, #36]
 408:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.BufSize        = 2;
 1182              		.loc 1 408 35
 1183 0074 0223     		movs	r3, #2
 1184 0076 BB62     		str	r3, [r7, #40]
 409:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.PeriphInc      = DMA_PERIPH_INC_MODE_DISABLE;
 1185              		.loc 1 409 35
 1186 0078 0023     		movs	r3, #0
 1187 007a FB62     		str	r3, [r7, #44]
 410:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.MemoryInc      = DMA_MEM_INC_MODE_ENABLE;
 1188              		.loc 1 410 35
 1189 007c 8023     		movs	r3, #128
 1190 007e 3B63     		str	r3, [r7, #48]
 411:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.PeriphDataSize = DMA_PERIPH_DATA_WIDTH_WORD;
 1191              		.loc 1 411 35
 1192 0080 4FF40073 		mov	r3, #512
 1193 0084 7B63     		str	r3, [r7, #52]
 412:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.MemDataSize    = DMA_MEM_DATA_WIDTH_WORD;
 1194              		.loc 1 412 35
 1195 0086 4FF40063 		mov	r3, #2048
 1196 008a BB63     		str	r3, [r7, #56]
 413:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.CircularMode   = DMA_CIRCULAR_MODE_DISABLE;
 1197              		.loc 1 413 35
 1198 008c 0023     		movs	r3, #0
 1199 008e FB63     		str	r3, [r7, #60]
 414:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.Priority       = DMA_CH_PRIORITY_MEDIUM;
 1200              		.loc 1 414 35
 1201 0090 4FF48053 		mov	r3, #4096
 1202 0094 3B64     		str	r3, [r7, #64]
 415:../User/BSP/bsp_tim.c **** 	DMA_InitStructure.Mem2Mem        = DMA_MEM2MEM_DISABLE;
 1203              		.loc 1 415 35
 1204 0096 0023     		movs	r3, #0
 1205 0098 7B64     		str	r3, [r7, #68]
 416:../User/BSP/bsp_tim.c **** 	DMA_Initializes(DMA_CH2, &DMA_InitStructure);
 1206              		.loc 1 416 2
 1207 009a 07F11C03 		add	r3, r7, #28
 1208 009e 1946     		mov	r1, r3
 1209 00a0 2A48     		ldr	r0, .L44+12
 1210 00a2 FFF7FEFF 		bl	DMA_Initializes
 417:../User/BSP/bsp_tim.c **** 	DMA_Channel_Request_Remap(DMA_CH2, DMA_REMAP_TIM4_CH1);
 1211              		.loc 1 417 2
 1212 00a6 2221     		movs	r1, #34
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 31


 1213 00a8 2848     		ldr	r0, .L44+12
 1214 00aa FFF7FEFF 		bl	DMA_Channel_Request_Remap
 418:../User/BSP/bsp_tim.c **** 	DMA_Channel_Enable(DMA_CH2);
 1215              		.loc 1 418 2
 1216 00ae 2748     		ldr	r0, .L44+12
 1217 00b0 FFF7FEFF 		bl	DMA_Channel_Enable
 419:../User/BSP/bsp_tim.c **** 	
 420:../User/BSP/bsp_tim.c **** 	
 421:../User/BSP/bsp_tim.c ****   /*60M / 10K = 6K  ×î¸ßÆµÂÊ¿ÉÒÔ¼ì²âµ½6K£¬×îµÍÆµÂÊ¼ì²â0.1HZ   20HZ ~ 150HZ*/
 422:../User/BSP/bsp_tim.c ****   TIM_Base_Struct_Initialize(&TIM_TimeBaseStructure);
 1218              		.loc 1 422 3
 1219 00b4 07F14803 		add	r3, r7, #72
 1220 00b8 1846     		mov	r0, r3
 1221 00ba FFF7FEFF 		bl	TIM_Base_Struct_Initialize
 423:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.Period = GPTIMClockFrequency - 1; // ¶¨Ê±Æ÷3¹¤×÷ÔÚ30M£¬¼ÆÊýÖµÎª30K
 1222              		.loc 1 423 54
 1223 00be 224B     		ldr	r3, .L44+8
 1224 00c0 1B88     		ldrh	r3, [r3]
 1225 00c2 013B     		subs	r3, r3, #1
 1226 00c4 9BB2     		uxth	r3, r3
 1227              		.loc 1 423 32
 1228 00c6 A7F84C30 		strh	r3, [r7, #76]	@ movhi
 424:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.Prescaler = 10000 - 1;            // ·ÖÆµ10K
 1229              		.loc 1 424 35
 1230 00ca 42F20F73 		movw	r3, #9999
 1231 00ce A7F84830 		strh	r3, [r7, #72]	@ movhi
 425:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.ClkDiv = TIM_CLK_DIV1;
 1232              		.loc 1 425 32
 1233 00d2 0023     		movs	r3, #0
 1234 00d4 A7F84E30 		strh	r3, [r7, #78]	@ movhi
 426:../User/BSP/bsp_tim.c ****   TIM_TimeBaseStructure.CntMode = TIM_CNT_MODE_UP;
 1235              		.loc 1 426 33
 1236 00d8 0023     		movs	r3, #0
 1237 00da A7F84A30 		strh	r3, [r7, #74]	@ movhi
 427:../User/BSP/bsp_tim.c **** 
 428:../User/BSP/bsp_tim.c ****   TIM_Base_Initialize(TIM4, &TIM_TimeBaseStructure);
 1238              		.loc 1 428 3
 1239 00de 07F14803 		add	r3, r7, #72
 1240 00e2 1946     		mov	r1, r3
 1241 00e4 1C48     		ldr	r0, .L44+24
 1242 00e6 FFF7FEFF 		bl	TIM_Base_Initialize
 429:../User/BSP/bsp_tim.c ****   TIM_Base_Reload_Mode_Set(TIM4, TIM_PSC_RELOAD_MODE_IMMEDIATE);
 1243              		.loc 1 429 3
 1244 00ea 0121     		movs	r1, #1
 1245 00ec 1A48     		ldr	r0, .L44+24
 1246 00ee FFF7FEFF 		bl	TIM_Base_Reload_Mode_Set
 430:../User/BSP/bsp_tim.c **** 
 431:../User/BSP/bsp_tim.c ****   TIM_Input_Struct_Initialize(&TIM_ICInitStructure);
 1247              		.loc 1 431 3
 1248 00f2 07F15803 		add	r3, r7, #88
 1249 00f6 1846     		mov	r0, r3
 1250 00f8 FFF7FEFF 		bl	TIM_Input_Struct_Initialize
 432:../User/BSP/bsp_tim.c ****   TIM_ICInitStructure.Channel = TIM_CH_1;
 1251              		.loc 1 432 31
 1252 00fc 0023     		movs	r3, #0
 1253 00fe A7F85830 		strh	r3, [r7, #88]	@ movhi
 433:../User/BSP/bsp_tim.c ****   TIM_ICInitStructure.IcPolarity = TIM_IC_POLARITY_RISING;
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 32


 1254              		.loc 1 433 34
 1255 0102 0023     		movs	r3, #0
 1256 0104 A7F85A30 		strh	r3, [r7, #90]	@ movhi
 434:../User/BSP/bsp_tim.c ****   TIM_ICInitStructure.IcSelection = TIM_IC_SELECTION_DIRECTTI;
 1257              		.loc 1 434 35
 1258 0108 0123     		movs	r3, #1
 1259 010a A7F85C30 		strh	r3, [r7, #92]	@ movhi
 435:../User/BSP/bsp_tim.c ****   TIM_ICInitStructure.IcPrescaler = TIM_IC_PSC_DIV1;
 1260              		.loc 1 435 35
 1261 010e 0023     		movs	r3, #0
 1262 0110 A7F85E30 		strh	r3, [r7, #94]	@ movhi
 436:../User/BSP/bsp_tim.c ****   TIM_ICInitStructure.IcFilter = 0x0;
 1263              		.loc 1 436 32
 1264 0114 0023     		movs	r3, #0
 1265 0116 A7F86030 		strh	r3, [r7, #96]	@ movhi
 437:../User/BSP/bsp_tim.c ****   TIM_Input_Channel_Initialize(TIM4, &TIM_ICInitStructure);
 1266              		.loc 1 437 3
 1267 011a 07F15803 		add	r3, r7, #88
 1268 011e 1946     		mov	r1, r3
 1269 0120 0D48     		ldr	r0, .L44+24
 1270 0122 FFF7FEFF 		bl	TIM_Input_Channel_Initialize
 438:../User/BSP/bsp_tim.c **** 
 439:../User/BSP/bsp_tim.c ****   /* TIM enable counter */
 440:../User/BSP/bsp_tim.c ****   TIM_On(TIM4);
 1271              		.loc 1 440 3
 1272 0126 0C48     		ldr	r0, .L44+24
 1273 0128 FFF7FEFF 		bl	TIM_On
 441:../User/BSP/bsp_tim.c **** 	TIM_Dma_Enable(TIM4, TIM_DMA_CC1);
 1274              		.loc 1 441 2
 1275 012c 4FF40071 		mov	r1, #512
 1276 0130 0948     		ldr	r0, .L44+24
 1277 0132 FFF7FEFF 		bl	TIM_Dma_Enable
 442:../User/BSP/bsp_tim.c **** }
 1278              		.loc 1 442 1
 1279 0136 00BF     		nop
 1280 0138 8037     		adds	r7, r7, #128
 1281              	.LCFI28:
 1282              		.cfi_def_cfa_offset 8
 1283 013a BD46     		mov	sp, r7
 1284              	.LCFI29:
 1285              		.cfi_def_cfa_register 13
 1286              		@ sp needed
 1287 013c 80BD     		pop	{r7, pc}
 1288              	.L45:
 1289 013e 00BF     		.align	2
 1290              	.L44:
 1291 0140 00380240 		.word	1073887232
 1292 0144 D34D6210 		.word	274877907
 1293 0148 00000000 		.word	GPTIMClockFrequency
 1294 014c 1C000240 		.word	1073872924
 1295 0150 34080040 		.word	1073743924
 1296 0154 00000000 		.word	TIM_Freq_buff
 1297 0158 00080040 		.word	1073743872
 1298              		.cfi_endproc
 1299              	.LFE135:
 1301              		.text
 1302              	.Letext0:
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 33


 1303              		.file 2 "d:\\program files (x86)\\arm gnu toolchain arm-none-eabi\\12.3 rel1\\arm-none-eabi\\inclu
 1304              		.file 3 "d:\\program files (x86)\\arm gnu toolchain arm-none-eabi\\12.3 rel1\\arm-none-eabi\\inclu
 1305              		.file 4 "../firmware/CMSIS/device/n32g430.h"
 1306              		.file 5 "../firmware/n32g430_std_periph_driver/inc/n32g430_dma.h"
 1307              		.file 6 "../firmware/n32g430_std_periph_driver/inc/n32g430_gpio.h"
 1308              		.file 7 "../firmware/n32g430_std_periph_driver/inc/n32g430_rcc.h"
 1309              		.file 8 "../firmware/n32g430_std_periph_driver/inc/n32g430_tim.h"
 1310              		.file 9 "../firmware/n32g430_std_periph_driver/inc/misc.h"
 1311              		.file 10 "../User/BSP/bsp_tim.h"
 1312              		.file 11 "../firmware/CMSIS/device/system_n32g430.h"
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 34


DEFINED SYMBOLS
                            *ABS*:00000000 bsp_tim.c
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:21     .RamFunc:00000000 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:27     .RamFunc:00000000 switch_pwm
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:71     .RamFunc:00000034 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:78     .RamFunc:00000050 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:360    .RamFunc:0000020c $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:460    .bss.pwm_polarity:00000000 pwm_polarity
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:365    .RamFunc:00000214 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:371    .RamFunc:00000214 pwm_duty_set
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:452    .RamFunc:00000288 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:461    .bss.pwm_polarity:00000000 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:467    .bss.GPTIMClockFrequency:00000000 GPTIMClockFrequency
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:464    .bss.GPTIMClockFrequency:00000000 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:474    .bss.TIM_Freq_buff:00000000 TIM_Freq_buff
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:471    .bss.TIM_Freq_buff:00000000 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:477    .text.TIM1_PWM_Init:00000000 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:483    .text.TIM1_PWM_Init:00000000 TIM1_PWM_Init
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:866    .text.TIM1_PWM_Init:000002b0 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:874    .text.TIM6_1Khz_Init:00000000 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:880    .text.TIM6_1Khz_Init:00000000 TIM6_1Khz_Init
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:989    .text.TIM6_1Khz_Init:0000008c $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:995    .text.TIM4_ETR_Init:00000000 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:1001   .text.TIM4_ETR_Init:00000000 TIM4_ETR_Init
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:1085   .text.TIM4_ETR_Init:00000070 $d
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:1090   .text.TIM4_Capture_Config:00000000 $t
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:1096   .text.TIM4_Capture_Config:00000000 TIM4_Capture_Config
C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s:1291   .text.TIM4_Capture_Config:00000140 $d

UNDEFINED SYMBOLS
TIM_PWM_Output_Disable
TIM_Interrupt_Status_Clear
TIM_Interrupt_Enable
TIM_PWM_Output_Enable
TIM_Compare1_Set
TIM_Compare2_Set
TIM_Compare3_Set
TIM_Compare7_Set
TIM_Compare8_Set
TIM_Compare9_Set
TIM_Compare1_D_Set
TIM_Compare2_D_Set
TIM_Compare3_D_Set
TIM_Reset
TIM_Base_Struct_Initialize
TIM_Base_Initialize
TIM_Output_Channel1_Initialize
TIM_Output_Channel2_Initialize
TIM_Output_Channel3_Initialize
TIM_Output_Channel4_Initialize
TIM_Output_Channel1_Preload_Set
TIM_Output_Channel2_Preload_Set
TIM_Output_Channel3_Preload_Set
TIM_Output_Channel4_Preload_Set
TIM_Compare4_D_Set
TIM_Output_Channel7_Preload_Set
TIM_Output_Channel8_Preload_Set
ARM GAS  C:\Users\ZShuai\AppData\Local\Temp\ccgV4LWt.s 			page 35


TIM_Output_Channel9_Preload_Set
TIM_OC7REF_Trigger_To_ADC_Enable
TIM_OC8REF_Trigger_To_ADC_Enable
TIM_OC9REF_Trigger_To_ADC_Enable
TIM_Output_Trigger_Select
TIM_Base_Center_Aligned_Mode_OC4_7_8_9_Trigger_Set
TIM_Break_And_Dead_Time_Set
TIM_Asymmetric_Enable
TIM_Trigger_Source_Select
TIM_Slave_Mode_Select
TIM_Master_Slave_Mode_Set
TIM_On
NVIC_Initializes
SystemClockFrequency
RCC_Clocks_Frequencies_Value_Get
TIM_Base_Reload_Mode_Set
TIM_External_Clock_Mode2_Set
GPIO_Structure_Initialize
GPIO_Peripheral_Initialize
DMA_Reset
DMA_Structure_Initializes
DMA_Initializes
DMA_Channel_Request_Remap
DMA_Channel_Enable
TIM_Input_Struct_Initialize
TIM_Input_Channel_Initialize
TIM_Dma_Enable
